try{window._umbel=window._umbel||[];data=data||{}
data.umbel=data.umbel||[]
data.quantcast=data.quantcast||{}
data.umbel.forEach(_umbel.push);_qevents.push(data.quantcast);}catch(err){};adroll_adv_id="MUMVFSAHW5E3HPPU4GASIX";adroll_pix_id="HDNOFOB2LFBVNP2EWAKBJO";(function(){var oldonload=window.onload;window.onload=function(){__adroll_loaded=true;var scr=document.createElement("script");var host=(("https:"==document.location.protocol)?"https://s.adroll.com":"http://a.adroll.com");scr.setAttribute('async','true');scr.type="text/javascript";scr.src=host+"/j/roundtrip.js";((document.getElementsByTagName('head')||[null])[0]||document.getElementsByTagName('script')[0].parentNode).appendChild(scr);if(oldonload){oldonload()}};}());;if(!Array.from){Array.from=(function(){var toStr=Object.prototype.toString;var isCallable=function(fn){return typeof fn==='function'||toStr.call(fn)==='[object Function]';};var toInteger=function(value){var number=Number(value);if(isNaN(number)){return 0;}
if(number===0||!isFinite(number)){return number;}
return(number>0?1:-1)*Math.floor(Math.abs(number));};var maxSafeInteger=Math.pow(2,53)-1;var toLength=function(value){var len=toInteger(value);return Math.min(Math.max(len,0),maxSafeInteger);};return function from(arrayLike ){var C=this;var items=Object(arrayLike);if(arrayLike==null){throw new TypeError("Array.from requires an array-like object - not null or undefined");}
var mapFn=arguments.length>1?arguments[1]:void undefined;var T;if(typeof mapFn!=='undefined'){if(!isCallable(mapFn)){throw new TypeError('Array.from: when provided, the second argument must be a function');}
if(arguments.length>2){T=arguments[2];}}
var len=toLength(items.length);var A=isCallable(C)?Object(new C(len)):new Array(len);var k=0;var kValue;while(k<len){kValue=items[k];if(mapFn){A[k]=typeof T==='undefined'?mapFn(kValue,k):mapFn.call(T,kValue,k);}else{A[k]=kValue;}
k+=1;}
A.length=len;return A;};}());};(function(){function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt;}
CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent;})();;if(!String.prototype.includes){String.prototype.includes=function(search,start){'use strict';if(typeof start!=='number'){start=0;}
if(start+search.length>this.length){return false;}else{return this.indexOf(search,start)!==-1;}};};dot.provide('dot.experiments');dot.experiments.ExperimentManager=function(experimentId){this.experimentId=experimentId;this.cxapiLoader=dot.experiments.getCxapiLoader("//www.google-analytics.com/cx/api.js?experiment="+experimentId);};dot.experiments.ExperimentManager.prototype.experimentId=null;dot.experiments.ExperimentManager.prototype.determineVariation=function(callback){var self=this;this.cxapiLoader(function(){var variation=cxApi.chooseVariation();if(variation!=cxApi.NO_CHOSEN_VARIATION&&variation!=cxApi.NOT_PARTICIPATING){window.ga('set','expId',self.experimentId);window.ga('set','expVar',variation);window.ga('send','experiment');}
callback(variation);},this);};dot.experiments.getCxapiLoader=function(url){return function(callback){var defer=dot.utils.net.jsloader(url);defer.onload=callback;};};;dot.provide('dot.utils.dom');dot.utils.dom.htmlToFragment=function(html){var proxy=document.createElement('div');proxy.innerHTML=html;var fragment=document.createDocumentFragment();while(proxy.firstChild){fragment.appendChild(proxy.firstChild);}
return fragment;};dot.utils.dom.matches=function(element,selector){if('matchesSelector'in element){return element.matchesSelector(selector);}
return element.matches(selector);};dot.utils.dom.getChildIndex=function(element){var parent=element.parentNode;for(var i=parent.children.length-1;i>-1;--i){var child=parent.children[i];if(child==element){break;}}
return i;};dot.utils.dom.ancestor=function(element,finder){var parent=element.parentElement;if(!parent){return null;}
if(!finder||finder(parent)){return parent;}
return arguments.callee.call(this,parent,finder);};;dot.provide('dot.utils.events');dot.utils.events.stop=function(e){e.preventDefault();e.stopPropagation();return false;};;dot.provide('dot.utils.net');dot.utils.net.EMAIL_REGEX=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;dot.utils.net.TWITTER_REGEX=/^@(\w+){1,15}$/;dot.utils.net.serialize=function(data,name){var product=[];for(var property in data){if(data.hasOwnProperty(property)){var key=property;if(name){key=name+'['+property+']';}
var value=data[property];var string=(value&&typeof value=='object')?dot.utils.net.serialize(value,key):encodeURIComponent(key)+'='+encodeURIComponent(value);product.push(string);}}
return product.join('&');};dot.utils.net.xhr=function(url,xhrSuccess,xhrFailure){xhrSuccess=xhrSuccess||function(){};xhrFailure=xhrFailure||function(){};var xhr=new XMLHttpRequest();xhr.addEventListener("load",xhrSuccess);xhr.addEventListener("error",xhrFailure);xhr.open("GET",url);xhr.send();};dot.utils.net.jsloader=function(url){var script=document.createElement('script');script.src=url;document.head.appendChild(script);return script;};dot.utils.net.cookies={get:function(key){key=key+"=";var parts=document.cookie.split(';');for(var i=0;i<parts.length;i++){var segment=parts[i];segment=segment.trim();if(segment.indexOf(key)===0){var value=segment.substring(key.length);return decodeURIComponent(value);}}
return'';}, set:function(key,value,expires){var output=key+'='+encodeURIComponent(value);if(expires){output+="; expires="+expires;}
document.cookie=output;},delete:function(key){dot.net.utils.cookies.set(key,undefined,-1);}};;dot.provide('dot.utils.oop');dot.utils.oop.extend=function(sup,sub){var proto=function(){};proto.prototype=sup.prototype;sub.prototype=new proto();sub.prototype.super=sup.prototype;sub.prototype.constructor=sub;return sub;};dot.utils.oop.singleton=function(constructor){var instance=null;constructor.getInstance=function(){if(instance==null){instance=new constructor();}
return instance;}};;dot.provide('dot.utils.objects');dot.utils.objects.copy=function(to,from,deep){for(var key in from){if(from.hasOwnProperty(key)){if(deep&&typeof from[key]=='object'){to[key]=arguments.callee.call(null,{},from[key],true);}else{to[key]=from[key];}}}
return to;};dot.utils.objects.clone=function(from){return dot.utils.objects.copy({},from,true);};dot.utils.objects.populated=function(map){for(var key in map){if(map.hasOwnProperty(key)){if(!map[key]){return false;}}}
return true;};;dot.provide('dot.utils.arrays');dot.utils.arrays.flatten=function(input,output){if(!Array.isArray(output)){output=[];}
input.forEach(function(element){if(Array.isArray(element)){dot.utils.arrays.flatten(element,output);}else{output.push(element);}});return output;};dot.utils.arrays.unique=function(array){return array.reduce(function(previous,current){if(previous.indexOf(current)==-1){previous.push(current);}
return previous;},[]);};;dot.provide('dot.utils.getRandomInteger');dot.utils.getRandomInt=function(min,max){return Math.floor(Math.random()*(max-min))+min;};;dot.provide('dot.events');dot.events.EventTarget=function(){this.listeners={};};dot.events.EventTarget.prototype.listeners=null;dot.events.EventTarget.prototype.hasListenersOfType=function(type){return type in this.listeners;};dot.events.EventTarget.prototype.addEventListener=function(type,callback){if(!this.hasListenersOfType(type)){this.listeners[type]=[];}
this.listeners[type].push(callback);};dot.events.EventTarget.prototype.removeEventListener=function(type,callback){if(!this.hasListenersOfType(type)){return;}
var stack=this.listeners[type];for(var i=0,l=stack.length;i<l;i++){if(stack[i]===callback){stack.splice(i,1);return this.removeEventListener(type,callback);}}};dot.events.EventTarget.prototype.dispatchEvent=function(event){if(!this.hasListenersOfType(event.type)){return;}
var stack=this.listeners[event.type];event.target=this;for(var i=0,l=stack.length;i<l;i++){stack[i].call(this,event);}};;dot.provide('dot.events.EventTargetProvider');dot.events.EventTargetProvider.eventTarget=null;dot.events.EventTargetProvider.getEventTarget=function(){if(dot.events.EventTargetProvider.eventTarget==null){dot.events.EventTargetProvider.eventTarget=document.createDocumentFragment();}
return dot.events.EventTargetProvider.eventTarget;};;dot.provide('dot.animation.Easing');dot.animation.Easing.Linear={easeNone:function(t,b,c,d){return c*t/d+b;}};dot.animation.Easing.Quad={easeIn:function(t,b,c,d){return c*(t/=d)*t+b;},easeOut:function(t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOut:function(t,b,c,d){if((t/=d/2)<1){return c / 2 * t * t + b;
    }
    return -c /2*((--t)*(t-2)-1)+b;}};dot.animation.Easing.Cubic={easeIn:function(t,b,c,d){return c*(t/=d)*t*t+b;},easeOut:function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOut:function(t,b,c,d){if((t/=d/2)<1){return c / 2 * t * t * t + b;
    }
    return c /2*((t-=2)*t*t+2)+b;}};dot.animation.Easing.Quart={easeIn:function(t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOut:function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOut:function(t,b,c,d){if((t/=d/2)<1){return c / 2 * t * t * t * t + b;
    }
    return -c /2*((t-=2)*t*t*t-2)+b;}};dot.animation.Easing.Quint={easeIn:function(t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOut:function(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOut:function(t,b,c,d){if((t/=d/2)<1){return c / 2 * t * t * t * t * t + b;
    }
    return c /2*((t-=2)*t*t*t*t+2)+b;}};dot.animation.Easing.Circ={easeIn:function(t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOut:function(t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOut:function(t,b,c,d){if((t/=d/2)<1){return-c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
    }
    return c /2*(Math.sqrt(1-(t-=2)*t)+1)+b;}};dot.animation.Easing.Sine={easeIn:function(t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOut:function(t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOut:function(t,b,c,d){return-c / 2 * (Math.cos(Math.PI * t /d)-1)+b;}};dot.animation.Easing.Expo={easeIn:function(t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOut:function(t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOut:function(t,b,c,d){if(t==0){return b;}
if(t==d){return b+c;}
if((t/=d/2)<1){return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
    }
    return c /2*(-Math.pow(2,-10*--t)+2)+b;}};dot.animation.Easing.Back={easeIn:function(t,b,c,d,s){if(isNaN(s)){s=1.70158;}
return c*(t/=d)*t*((s+1)*t-s)+b;},easeOut:function(t,b,c,d,s){if(isNaN(s)){s=1.70158;}
return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOut:function(t,b,c,d,s){if(isNaN(s)){s=1.70158;}
if((t/=d/2)<1){return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;
    }
    return c /2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;}};dot.animation.Easing.Bounce={easeIn:function(t,b,c,d){return c-dot.animation.Easing.Bounce.easeOut(d-t,0,c,d)+b;},easeOut:function(t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}
if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}
if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}
return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;},easeInOut:function(t,b,c,d){if(t<d/2){return dot.animation.Easing.Bounce.easeIn(t*2,0,c,d)*.5+b;}
return dot.animation.Easing.Bounce.easeOut(t*2-d,0,c,d)*.5+c*.5+b;}};dot.animation.Easing.Elastic={easeIn:function(t,b,c,d,a,p){if(isNaN(a)){a=0;}
if(isNaN(p)){p=0;}
var s;if(t==0){return b;}
if((t/=d)==1){return b+c;}
if(!p){p=d*.3;}
if(!a||a<Math.abs(c)){a=c;s=p/4;}else{s=p/(Math.PI*2)*Math.asin(c/a);}
return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(Math.PI*2)/p))+b;},easeOut:function(t,b,c,d,a,p){if(isNaN(a)){a=0;}
if(isNaN(p)){p=0;}
var s;if(t==0){return b;}
if((t/=d)==1){return b+c;}
if(!p){p=d*.3;}
if(!a||a<Math.abs(c)){a=c;s=p/4;}else{s=p/(Math.PI*2)*Math.asin(c/a);}
return(a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(Math.PI*2)/p)+c+b);},easeInOut:function(t,b,c,d,a,p){if(isNaN(a)){a=0;}
if(isNaN(p)){p=0;}
var s;if(t==0){return b;}
if((t/=d/2)==2){return b+c;}
if(!p){p=d*(.3*1.5);}
if(!a||a<Math.abs(c)){a=c;s=p/4;}else{s=p/(Math.PI*2)*Math.asin(c/a);}
if(t<1){return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(Math.PI*2)/p))+b;}
return a*Math.pow(2,-10*(t
-=1))*Math.sin((t*d-s)*(Math.PI*2)/p)*.5+c+b;}};dot.animation.Easing.Quintic=dot.animation.Easing.Strong=dot.animation.Easing.Quint;dot.animation.Easing.Quartic=dot.animation.Easing.Quart;;dot.provide('dot.animation');dot.animation.ValueAnimator=function(){this.runAnimation=this.runAnimation.bind(this);this.setupAnimation=this.setupAnimation.bind(this);};dot.animation.ValueAnimator.prototype.valueFrom=0;dot.animation.ValueAnimator.prototype.valueTo=0;dot.animation.ValueAnimator.prototype.valueChange=0;dot.animation.ValueAnimator.prototype.animationId=null;dot.animation.ValueAnimator.prototype.startedAt=0;dot.animation.ValueAnimator.prototype.elapsedTime=0;dot.animation.ValueAnimator.prototype.percentComplete=0;dot.animation.ValueAnimator.prototype.easedPercentComplete=0;dot.animation.ValueAnimator.prototype.easedValue=0;dot.animation.ValueAnimator.prototype.duration=0;dot.animation.ValueAnimator.prototype.animationListener=null;dot.animation.ValueAnimator.prototype.getPercentComplete=function(){return this.percentComplete;};dot.animation.ValueAnimator.prototype.getEasedPercentComplete=function(){return this.easedPercentComplete;};dot.animation.ValueAnimator.prototype.setValues=function(from,to){this.valueFrom=from;this.valueTo=to;this.valueChange=to-from;};dot.animation.ValueAnimator.prototype.setFromValue=function(from){this.setValues(from,this.valueTo);};dot.animation.ValueAnimator.prototype.setToValue=function(to){this.setValues(this.valueFrom,to);};dot.animation.ValueAnimator.prototype.easingFunction=function(t,c,b,d){return t/d;};dot.animation.ValueAnimator.prototype.setEasingFunction=function(easingFunction){this.easingFunction=easingFunction;};dot.animation.ValueAnimator.prototype.getAnimationListener=function(){return this.animationListener;};dot.animation.ValueAnimator.prototype.setAnimationListener=function(animationListener){this.animationListener=animationListener;};dot.animation.ValueAnimator.prototype.setDuration=function(duration){this.duration=duration;};dot.animation.ValueAnimator.prototype.getIsComplete=function(){return this.elapsedTime>=this.duration;};dot.animation.ValueAnimator.prototype.start=function(){this.animationId=window.requestAnimationFrame(this.setupAnimation);};dot.animation.ValueAnimator.prototype.setupAnimation=function(timestamp){this.startedAt=timestamp;this.animationId=window.requestAnimationFrame(this.runAnimation);if(this.animationListener!=null){this.animationListener.onAnimationStart(this);}};dot.animation.ValueAnimator.prototype.stop=function(){if(this.animationId!=null){window.cancelAnimationFrame(this.animationId);this.animationId=null;}};dot.animation.ValueAnimator.prototype.runAnimation=function(timestamp){this.elapsedTime=timestamp-this.startedAt;this.percentComplete=this.elapsedTime/this.duration;this.easedPercentComplete=this.easingFunction(this.elapsedTime,0,1,this.duration);this.easedValue=this.valueFrom+this.valueChange*this.easedPercentComplete;var complete=this.getIsComplete();if(complete){this.percentComplete=1;this.easedPercentComplete=1;this.easedValue=this.valueTo;}else{this.animationId=window.requestAnimationFrame(this.runAnimation);}
if(this.animationListener!=null){this.animationListener.onAnimationProgress(this.easedValue,this);if(complete){this.animationListener.onAnimationComplete(this);}}};dot.animation.ValueAnimator.prototype.setProgressCallback=function(callback){if(this.animationListener==null){this.animationListener=new dot.animation.ValueAnimator.AnimationListener();}
this.animationListener.onAnimationProgress=callback;};dot.animation.ValueAnimator.AnimationListener=function(){};dot.animation.ValueAnimator.AnimationListener.prototype.onAnimationStart=function(animator){};dot.animation.ValueAnimator.AnimationListener.prototype.onAnimationProgress=function(value,animator){};dot.animation.ValueAnimator.AnimationListener.prototype.onAnimationComplete=function(animator){};;dot.provide('dot.widgets');dot.widgets.LayoutManager=function(){this.callbacks=[];this.executeLayoutUpdateListeners=this.executeLayoutUpdateListeners.bind(this);var update=this.onLayoutUpdateHandler.bind(this);dot.widgets.LayoutManager.LAYOUT_EVENTS.forEach(function(event){window.addEventListener(event,update);});};dot.utils.oop.singleton(dot.widgets.LayoutManager);dot.widgets.LayoutManager.LAYOUT_EVENTS=['resize','scroll'];dot.widgets.LayoutManager.prototype.hasPendingUpdate=false;dot.widgets.LayoutManager.prototype.animationId=-1;dot.widgets.LayoutManager.prototype.callbacks=null;dot.widgets.LayoutManager.prototype.addLayoutUpdateListener=function(callback){this.callbacks.push(callback);callback();};dot.widgets.LayoutManager.prototype.removeLayoutUpdateListener=function(callback){var index=this.callbacks.indexOf(callback);if(index>-1){while(index>-1){this.callbacks.splice(index,1);index=this.callbacks.indexOf(callback);}
return true;}
return false;};dot.widgets.LayoutManager.prototype.executeLayoutUpdateListeners=function(){this.callbacks.forEach(function(callback){callback();});this.hasPendingUpdate=false;};dot.widgets.LayoutManager.prototype.onLayoutUpdateHandler=function(e){if(!this.hasPendingUpdate){this.animationId=window.requestAnimationFrame(this.executeLayoutUpdateListeners);this.hasPendingUpdate=true;}};dot.widgets.LayoutManager.prototype.cancelPendingExecutions=function(){if(this.animationId>-1){window.cancelAnimationFrame(this.animationId);}
this.hasPendingUpdate=false;};dot.widgets.LayoutManager.prototype.trigger=dot.widgets.LayoutManager.prototype.executeLayoutUpdateListeners;;dot.provide('dot.widgets.SearchAutoComplete');dot.widgets.SearchAutoComplete=function(inputElement){this.input=inputElement;this.input.addEventListener('input',this.inputEntryHandler.bind(this));this.lowercaseListOfSuggestions=this.listOfSuggestions.join(',').toLowerCase().split(',');};dot.widgets.SearchAutoComplete.prototype.input=null;dot.widgets.SearchAutoComplete.prototype.listMatches=[];dot.widgets.SearchAutoComplete.prototype.minChars=1;dot.widgets.SearchAutoComplete.prototype.maxItems=5;dot.widgets.SearchAutoComplete.prototype.lowercaseListOfSuggestions=[];dot.widgets.SearchAutoComplete.prototype.listOfSuggestions=["Donald Trump","Apple vs. FBI","#OscarsSoWhite","2016 Election","30 Days of Star Wars","Debug","Unclick","IRL","Upstream","Layer 8","Parsec","Dot Esports","Apple","Apps","Guides","Facebook","Snapchat","VR","WTF","Cute","Memes","Comics","Satire","Trolls","Sex","LGBT","Activism","NSFW","Body Positivity","POV","YouTube","Streaming","Comedy","Music","Celebrities","Security","Police","Policy","Privacy","Science","Gaming","Fandom","Marvel","Geek Fashion","Nostalgia","Via","FGC","Heroes of the Storm","Dota 2","Counter-Strike","League of Legends","The Daily Dot Bazaar","twitter","reddit","instagram","tumblr","barack obama","hacking","comic","porn","gif","nsa","google","dogs","art","star wars","netflix","dating","edward snowden","iphone","anonymous","fluffington post","racism","game of thrones","movies","amazon","food","vine","lol","pinterest","stock","bitcoin","kickstarter","animals","cats","2016","drones","internet","hillary clinton","rape","sexism","craigslist","social media","tinder","google plus","fashion","surveillance","feminism","prism","marijuana","league championship series","isis","space","fbi","editors pick","wikipedia","internet freedom","football","disney","4chan","hearthstone","cat","video","cybersecurity","russia","encryption","china","pranks","ferguson","spotify","women","sxsw","congress","reddit digest","counter strike","morning gif","censorship","kids","video games","gay","funny","elections","new york","esports","texas","tv","app","microsoft","jimmy kimmel","android","net neutrality","george rr martin","nfl","nintendo","transgender","love","ama","selfie","mashups","wikileaks","bernie sanders","japan","beyonce","mitt romney","moms","nasa","ted cruz","halloween","politics","sony","the force awakens","crowdfunding","webseries","parody","michael brown","trailers","saturday night live","harry potter","fcc","jimmy fallon","silk road","super bowl","uber","wearables","taylor swift","batman","television","relationships","birthdays","subreddit","teens","hbo","kanye west","supreme court","twitch","cancer","tor","police brutality","terrorism","syria","asoiaf","crime","the daily show","pets","oculus rift","doctor who","weddings","white house","conan o'brien","virtual reality","emoji","canada","justin bieber","logo","mark zuckerberg","australia","sexual assault","abstract","technology","drugs","health","education","hollywood","spying","apple watch","indiegogo","copyright","ios","tech","cosplay","ipad","fanfiction","fnatic","kim kardashian","republicans"];dot.widgets.SearchAutoComplete.prototype.currentList=document.getElementById("dd-search-recommendations-list");dot.widgets.SearchAutoComplete.prototype.inputEntryHandler=function(event){var value=event.srcElement.value;if(!value.length>=this.minChars){return}
var inputToFind=value.toString().toLowerCase();var list=this.lowercaseListOfSuggestions;var arrayOfMatches=[];var arrayOfIndexes=[];this.listMatches=[];var re=new RegExp('(\\b|^)'+inputToFind,"g");for(var i=0;i<list.length;i++){var index=i;if(list[i].match(re)){arrayOfMatches.push(list[i]);arrayOfIndexes.push(index);}}
for(var indexItem in arrayOfIndexes){this.listMatches.push(this.listOfSuggestions[arrayOfIndexes[indexItem]]);}
this.currentList.innerHTML="";for(var item in this.listMatches){if(item<this.maxItems){var listItem=document.createElement("li");var linkItem=document.createElement("a");linkItem.href="/search/?q="+this.listMatches[item];linkItem.innerHTML=this.listMatches[item];listItem.appendChild(linkItem);this.currentList.insertBefore(listItem,this.currentList.children[0]);}else{break;}}};;dot.provide('dot.widgets');dot.widgets.ViewPager=dot.utils.oop.extend(dot.events.EventTarget,function(){dot.events.EventTarget.call(this);this.startAnimation=this.startAnimation.bind(this);this.runAnimation=this.runAnimation.bind(this);this.updateVisiblePosition=this.updateVisiblePosition.bind(this);this.updateVisibleContent=this.updateVisibleContent.bind(this);this.runAutoAdvance=this.runAutoAdvance.bind(this);this.runDrag=this.runDrag.bind(this);this.endDrag=this.endDrag.bind(this);this.getDom();this.elementContainer.addEventListener('touchstart',this.startDrag.bind(this));});dot.widgets.ViewPager.DEFAULT_ADVANCE_INTERMISSION=7000;dot.widgets.ViewPager.DragConfig={INITIALIZATION_THRESHOLD:10,INTENT_THRESHOLD:50};dot.widgets.ViewPager.DragAxisIntent={HORIZONTAL:1,VERTICAL:-1,NONE:0};dot.widgets.ViewPager.Movement={RIGHT:1,LEFT:-1,NONE:0};dot.widgets.ViewPager.FlingConfig={THRESHOLD:40,VELOCITY:1};dot.widgets.ViewPager.Events={INDEX_CHANGED:'dot.widgets.ViewPager.indexChanged'};dot.widgets.ViewPager.prototype.advanceIntermission=dot.widgets.ViewPager.DEFAULT_ADVANCE_INTERMISSION;dot.widgets.ViewPager.prototype.advanceIntervalId=0;dot.widgets.ViewPager.prototype.shim=null;dot.widgets.ViewPager.prototype.elementContainer=null;dot.widgets.ViewPager.prototype.elementSlider=null;dot.widgets.ViewPager.prototype.elementLeft=null;dot.widgets.ViewPager.prototype.elementCenter=null;dot.widgets.ViewPager.prototype.elementRight=null;dot.widgets.ViewPager.prototype.x=0;dot.widgets.ViewPager.prototype.adapter=null;dot.widgets.ViewPager.prototype.isDragging=false;dot.widgets.ViewPager.prototype.isAnimating=false;dot.widgets.ViewPager.prototype.indexPending=0;dot.widgets.ViewPager.prototype.indexCurrent=0;dot.widgets.ViewPager.prototype.indexLast=0;dot.widgets.ViewPager.prototype.touchCurrentY=0;dot.widgets.ViewPager.prototype.touchLastY=0;dot.widgets.ViewPager.prototype.touchCurrentX=0;dot.widgets.ViewPager.prototype.touchLastX=0;dot.widgets.ViewPager.prototype.touchOffsetX=0;dot.widgets.ViewPager.prototype.touchTimeCurrent=0;dot.widgets.ViewPager.prototype.touchTimeLast=0;dot.widgets.ViewPager.prototype.positionDestination=0;dot.widgets.ViewPager.prototype.positionStart=0;dot.widgets.ViewPager.prototype.positionChange=0;dot.widgets.ViewPager.prototype.animationId=0;dot.widgets.ViewPager.prototype.direction=0;dot.widgets.ViewPager.prototype.timeStart=0;dot.widgets.ViewPager.prototype.timeDuration=250;dot.widgets.ViewPager.prototype.easingIntensity=5;dot.widgets.ViewPager.prototype.hasPendingPositionUpdate=false;dot.widgets.ViewPager.prototype.dragInitialized=false;dot.widgets.ViewPager.prototype.dragAxisIntent=dot.widgets.ViewPager.DragAxisIntent.NONE;dot.widgets.ViewPager.prototype.getAdapter=function(){return this.adapter;};dot.widgets.ViewPager.prototype.setAdvanceIntermission=function(intermission){this.cancelAutoAdvance();this.advanceIntermission=intermission;this.startAutoAdvance();};dot.widgets.ViewPager.prototype.startAutoAdvance=function(){this.advanceIntervalId=window.setInterval(this.runAutoAdvance,this.advanceIntermission);};dot.widgets.ViewPager.prototype.cancelAutoAdvance=function(){window.clearInterval(this.advanceIntervalId);};dot.widgets.ViewPager.prototype.runAutoAdvance=function(){if(!this.isDragging&&!this.isAnimating){this.slideNext();}};dot.widgets.ViewPager.prototype.getDom=function(){this.elementContainer=document.createElement('div');this.elementSlider=document.createElement('div');this.elementCenter=document.createElement('div');this.elementLeft=document.createElement('div');this.elementRight=document.createElement('div');};dot.widgets.ViewPager.prototype.getShim=function(){if(this.shim==null){this.shim=document.createElement('div');this.shim.style.display='none';this.elementContainer.appendChild(this.shim);}
return this.shim;};dot.widgets.ViewPager.prototype.setAdapter=function(adapter){this.adapter=adapter;this.onIndexChanged();};dot.widgets.ViewPager.prototype.setX=function(x){this.x=x;this.updateVisiblePosition();};dot.widgets.ViewPager.prototype.scheduleX=function(x){this.x=x;if(!this.hasPendingPositionUpdate){this.hasPendingPositionUpdate=true;window.requestAnimationFrame(this.updateVisiblePosition);}};dot.widgets.ViewPager.prototype.getX=function(){return this.x;};dot.widgets.ViewPager.prototype.updateVisiblePosition=function(){this.elementSlider.style.left=this.x+'px';this.hasPendingPositionUpdate=false;};dot.widgets.ViewPager.prototype.getWidth=function(){return this.elementSlider.clientWidth;};dot.widgets.ViewPager.prototype.getThreshold=function(){return this.getWidth()*0.5;};dot.widgets.ViewPager.prototype.getDuration=function(){return this.timeDuration;};dot.widgets.ViewPager.prototype.setDuration=function(duration){this.timeDuration=duration;};dot.widgets.ViewPager.prototype.getLeftItem=function(){return this.adapter.getItemByIndex(this.indexCurrent-1);};dot.widgets.ViewPager.prototype.getCenterItem=function(){return this.adapter.getItemByIndex(this.indexCurrent);};dot.widgets.ViewPager.prototype.getRightItem=function(){return this.adapter.getItemByIndex(this.indexCurrent+1);};dot.widgets.ViewPager.prototype.getLeftDom=function(){return this.adapter.getDom(this.getLeftItem());};dot.widgets.ViewPager.prototype.getCenterDom=function(){return this.adapter.getDom(this.getCenterItem());};dot.widgets.ViewPager.prototype.getRightDom=function(){return this.adapter.getDom(this.getRightItem());};dot.widgets.ViewPager.prototype.constrainIndex=function(index){var length=this.getAdapter().getItems().length;if(index<0){index=length+(index%length);}
if(index>=length){index=index%length;}
return index;};dot.widgets.ViewPager.prototype.setIndex=function(index){index=this.constrainIndex(index);if(this.indexCurrent!=index){this.indexLast=this.indexCurrent;this.indexCurrent=index;this.onIndexChanged();}};dot.widgets.ViewPager.prototype.setIndexFromPending=function(){this.setIndex(this.indexPending);};dot.widgets.ViewPager.prototype.moveIndexBy=function(by){this.setIndex(this.indexCurrent+by);};dot.widgets.ViewPager.prototype.moveNext=function(){this.moveIndexBy(1);};dot.widgets.ViewPager.prototype.movePrevious=function(){this.moveIndexBy(-1);};dot.widgets.ViewPager.prototype.slideTo=function(index){index=this.constrainIndex(index);if(index==this.indexCurrent){return;}
if(index==this.constrainIndex(this.indexCurrent-1)){this.slidePrevious();return;}
if(index==this.constrainIndex(this.indexCurrent+1)){this.slideNext();return;}
this.direction=(index>this.indexCurrent)?dot.widgets.ViewPager.Movement.LEFT:dot.widgets.ViewPager.Movement.RIGHT;var container=(this.direction==dot.widgets.ViewPager.Movement.RIGHT)?this.elementLeft:this.elementRight;this.indexPending=index;var page=this.adapter.getItemByIndex(index);var dom=this.adapter.getDom(page);this.replaceContent(container,dom);this.setupAnimation();};dot.widgets.ViewPager.prototype.setIndexPendingFromDirection=function(){this.indexPending=this.indexCurrent-this.direction;};dot.widgets.ViewPager.prototype.slideInDirection=function(direction){this.direction=direction;this.setIndexPendingFromDirection();this.setupAnimation();};dot.widgets.ViewPager.prototype.slideNext=function(){this.slideInDirection(dot.widgets.ViewPager.Movement.LEFT);};dot.widgets.ViewPager.prototype.slidePrevious=function(){this.slideInDirection(dot.widgets.ViewPager.Movement.RIGHT);};dot.widgets.ViewPager.prototype.onIndexChanged=function(){this.updateVisibleContent();var event=new CustomEvent(dot.widgets.ViewPager.Events.INDEX_CHANGED);event.index=this.indexCurrent;this.dispatchEvent(event);};dot.widgets.ViewPager.prototype.replaceContent=function(parent,child){while(parent.hasChildNodes()){this.getShim().appendChild(parent.firstChild);}
parent.appendChild(child);};dot.widgets.ViewPager.prototype.updateVisibleContent=function(){this.replaceContent(this.elementLeft,this.getLeftDom());this.replaceContent(this.elementCenter,this.getCenterDom());this.replaceContent(this.elementRight,this.getRightDom());};dot.widgets.ViewPager.prototype.setupAnimation=function(){this.cancelAnimation();this.positionDestination=this.direction*this.getWidth();this.animationId=window.requestAnimationFrame(this.startAnimation);};dot.widgets.ViewPager.prototype.startAnimation=function(timestamp){this.isAnimating=true;this.positionStart=this.getX();this.positionChange=this.positionDestination-this.positionStart;this.timeStart=timestamp;this.animationId=window.requestAnimationFrame(this.runAnimation);};dot.widgets.ViewPager.prototype.runAnimation=function(timestamp){var ellapsed=timestamp-this.timeStart;var multiplier=1-Math.pow(1-(ellapsed/this.timeDuration),this.easingIntensity);this.setX(this.positionStart+(this.positionChange*multiplier));if(ellapsed<this.timeDuration){this.animationId=window.requestAnimationFrame(this.runAnimation);}else{this.cancelAnimation();this.endAnimation();}};dot.widgets.ViewPager.prototype.endAnimation=function(){this.setX(0);if(this.direction!=0){this.setIndexFromPending();this.direction=0;this.isAnimating=false;}};dot.widgets.ViewPager.prototype.cancelAnimation=function(){if(this.animationId!=null){window.cancelAnimationFrame(this.animationId);this.animationId=null;this.isAnimating=false;}};dot.widgets.ViewPager.prototype.computeVelocity=function(){var ellapsed=this.touchTimeCurrent-this.touchTimeLast;var distance=Math.abs(this.touchCurrentX-this.touchLastX);return distance/ellapsed;};dot.widgets.ViewPager.prototype.determineQualifiedFling=function(){var distance=Math.abs(this.touchCurrentX-this.touchLastX);if(distance>dot.widgets.ViewPager.FlingConfig.THRESHOLD){var velocity=this.computeVelocity();return velocity>dot.widgets.ViewPager.FlingConfig.VELOCITY;}
return false;};dot.widgets.ViewPager.prototype.getDirection=function(){if(this.determineQualifiedFling()){return this.getFlingDirection();}
return this.getDragDirection();};dot.widgets.ViewPager.prototype.getFlingDirection=function(){return this.touchCurrentX<this.touchLastX?dot.widgets.ViewPager.Movement.LEFT:dot.widgets.ViewPager.Movement.RIGHT;};dot.widgets.ViewPager.prototype.getDragDirection=function(){var distance=this.touchLastX-this.touchCurrentX;var threshold=this.getThreshold();if(distance<-threshold){return dot.widgets.ViewPager.Movement.RIGHT;}
if(distance>threshold){return dot.widgets.ViewPager.Movement.LEFT;}
return dot.widgets.ViewPager.Movement.NONE;};dot.widgets.ViewPager.prototype.isMovingVertically=function(){return this.getDistanceTravelledY()>this.getDistanceTravelledX();};dot.widgets.ViewPager.prototype.getDistanceTravelledX=function(){return Math.abs(this.touchCurrentX-this.touchLastX);};dot.widgets.ViewPager.prototype.getDistanceTravelledY=function(){return Math.abs(this.touchCurrentY-this.touchLastY);};dot.widgets.ViewPager.prototype.runDrag=function(e){this.touchCurrentX=this.getEventPositionX(e);this.touchCurrentY=this.getEventPositionY(e);if(this.dragInitialized){if(this.dragAxisIntent!=dot.widgets.ViewPager.DragAxisIntent.VERTICAL){if(!this.isMovingVertically()){e.preventDefault();this.scheduleX(this.touchOffsetX+this.touchCurrentX);return false;}else{}}}else{if(this.getDistanceTravelledX()>=dot.widgets.ViewPager.DragConfig.INITIALIZATION_THRESHOLD){this.dragInitialized=true;}}
if(this.dragAxisIntent==dot.widgets.ViewPager.DragAxisIntent.NONE){if(this.getDistanceTravelledX()>=dot.widgets.ViewPager.DragConfig.INTENT_THRESHOLD){this.dragAxisIntent=dot.widgets.ViewPager.DragAxisIntent.HORIZONTAL;}else if(this.getDistanceTravelledY()>=dot.widgets.ViewPager.DragConfig.INTENT_THRESHOLD){this.dragAxisIntent=dot.widgets.ViewPager.DragAxisIntent.VERTICAL;}}};dot.widgets.ViewPager.prototype.startDrag=function(e){this.endAnimation();this.cancelAnimation();this.dragAxisIntent=dot.widgets.ViewPager.DragAxisIntent.NONE;this.dragInitialized=false;this.isDragging=true;this.touchTimeLast=+(new Date());this.touchLastX=this.getEventPositionX(e);this.touchOffsetX=this.getX()-this.touchLastX;this.touchLastY=this.getEventPositionY(e);document.addEventListener('touchmove',this.runDrag);document.addEventListener('touchend',this.endDrag);document.addEventListener('touchcancel',this.endDrag);};dot.widgets.ViewPager.prototype.endDrag=function(e){this.isDragging=false;this.touchCurrentX=this.getEventPositionX(e);this.touchTimeCurrent=+(new Date());this.touchCurrentY=this.getEventPositionY(e);this.direction=this.getDirection();this.setIndexPendingFromDirection();if(this.direction!=dot.widgets.ViewPager.Movement.NONE){this.cancelAutoAdvance();}
this.setupAnimation();document.removeEventListener('touchmove',this.runDrag);document.removeEventListener('touchend',this.endDrag);document.removeEventListener('touchcancel',this.endDrag);};dot.widgets.ViewPager.prototype.getTouches=function(e){return e.changedTouches||e.targetTouches||e.touches;};dot.widgets.ViewPager.prototype.getEventPositionX=function(e){var touches=this.getTouches(e);return(touches&&touches[0]&&touches[0].pageX)||0;};dot.widgets.ViewPager.prototype.getEventPositionY=function(e){var touches=this.getTouches(e);return(touches&&touches[0]&&touches[0].pageY)||0;};;dot.provide('dot.widgets');dot.widgets.ViewPagerAdapter=function(items){if(items.length<2){throw new Error('ViewPagerAdapter requires at least 2 items');}
this.items=items;};dot.widgets.ViewPagerAdapter.prototype.items=null;dot.widgets.ViewPagerAdapter.prototype.cache=null;dot.widgets.ViewPagerAdapter.prototype.getItems=function(){return this.items;};dot.widgets.ViewPagerAdapter.prototype.getItemByIndex=function(index){var length=this.items.length;if(index<0){index=length+(index%length);}
if(index>=length){index=index%length;}
return this.items[index];};dot.widgets.ViewPagerAdapter.prototype.installCache=function(cacher){this.cache=cacher;};dot.widgets.ViewPagerAdapter.prototype.expand=function(item){return document.createElement('div');};dot.widgets.ViewPagerAdapter.prototype.getDom=function(item){var id=JSON.stringify(item);if(this.cache){if(this.cache.has(id)){return this.cache.get(id);}}
var dom=this.expand(item);if(this.cache){this.cache.put(id,dom);}
return dom;};dot.widgets.ViewPagerAdapter.IPagerCache=function(){};dot.widgets.ViewPagerAdapter.IPagerCache.prototype.has=function(key){};dot.widgets.ViewPagerAdapter.IPagerCache.prototype.get=function(key){};dot.widgets.ViewPagerAdapter.IPagerCache.prototype.put=function(key,value){};dot.widgets.ViewPagerAdapter.SimplePagerCache=function(){this.data={};};dot.widgets.ViewPagerAdapter.SimplePagerCache.prototype.data=null;dot.widgets.ViewPagerAdapter.SimplePagerCache.prototype.has=function(id){return id in this.data;};dot.widgets.ViewPagerAdapter.SimplePagerCache.prototype.get=function(id){return this.data[id];};dot.widgets.ViewPagerAdapter.SimplePagerCache.prototype.put=function(id,value){this.data[id]=value;};;'use strict';dot.provide('dot.widgets');dot.widgets.GetLocaleDate=function(){}
dot.widgets.GetLocaleDate.prototype.getTimeNodes=function(dataFormat){var timeTags=document.querySelectorAll('time')||[];var arrayDates=[];var lengthOfTags=timeTags.length;for(var i=0;i<lengthOfTags;i++){if(timeTags[i].dataset.format===dataFormat){arrayDates.push(timeTags[i]);}}
return arrayDates;}
dot.widgets.GetLocaleDate.FULL_MONTHS={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"};dot.widgets.GetLocaleDate.MONTH_ABBREVIATIONS={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"June",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"};dot.widgets.GetLocaleDate.prototype.renderDateTime=function(){var dateTimeAttributes=this.getTimeNodes('datetime')||[];dateTimeAttributes.forEach(function(datetimeDate,i){var allDatetimeDates=new Date(datetimeDate.attributes.datetime.value);var now=new Date();var abbreviatedMonths=dot.widgets.GetLocaleDate.MONTH_ABBREVIATIONS;var hour=allDatetimeDates.toLocaleTimeString().replace(/:\d{2}\s/,'');var abbreviatedMonth=abbreviatedMonths[allDatetimeDates.getMonth()];var day=allDatetimeDates.getDate();var daysDifference=this.timeDifferences(now,allDatetimeDates);if(daysDifference.days>365){datetimeDate.innerHTML=abbreviatedMonth+" "+day+", "+allDatetimeDates.getFullYear()+" at "+hour;}else{datetimeDate.innerHTML=abbreviatedMonth+" "+day+" "+" at "+hour;}}.bind(this));}
dot.widgets.GetLocaleDate.prototype.renderFullMonth=function(){var dateAttributes=this.getTimeNodes('date')||[];dateAttributes.forEach(function(dateAttribute,i){var allDateAttributes=new Date(dateAttribute.attributes.datetime.value);var months=dot.widgets.GetLocaleDate.FULL_MONTHS;var month=months[allDateAttributes.getMonth()];var dateNumber=allDateAttributes.getDate();dateAttribute.innerHTML=month+" "+dateNumber;});}
dot.widgets.GetLocaleDate.prototype.timeDifferences=function(today,dateToCompare){var minutesMilliseconds=1000*60;var hourMilliseconds=minutesMilliseconds*60;var dayMilliseconds=hourMilliseconds*24;var difference=Math.abs(today.getTime()-dateToCompare.getTime());return{minutes:Math.round(difference/minutesMilliseconds),hours:Math.round(difference/hourMilliseconds),days:Math.round(difference/dayMilliseconds)}}
dot.widgets.GetLocaleDate.prototype.pluralOrSingular=function(timeDifference,singular){return timeDifference<=1?singular:singular+"s";}
dot.widgets.GetLocaleDate.prototype.renderRelativeDate=function(){var relativeAttributes=this.getTimeNodes('relative')||[];var now=new Date();relativeAttributes.forEach(function(relativeDate,i){var allRelativeDates=new Date(relativeDate.attributes.datetime.value);var months=dot.widgets.GetLocaleDate.FULL_MONTHS;var timeDifferences=this.timeDifferences(now,allRelativeDates);var daysDifference=timeDifferences.days;var hourDifference=timeDifferences.hours;var minutesDifference=timeDifferences.minutes;var booleanHours=this.pluralOrSingular(hourDifference," hour");var booleanDays=this.pluralOrSingular(daysDifference," day");var booleanMinutes=this.pluralOrSingular(minutesDifference," minute");if(allRelativeDates.toDateString()===now.toDateString()){if(hourDifference){relativeDate.innerHTML=hourDifference+booleanHours+" ago";}else if(minutesDifference>0&&hourDifference<1){relativeDate.innerHTML=minutesDifference+booleanMinutes+" ago";}}else if(daysDifference>0&&daysDifference<14){relativeDate.innerHTML=daysDifference+booleanDays+" ago";}else{relativeDate.innerHTML=months[allRelativeDates.getMonth()]+" "+allRelativeDates.getDate();}}.bind(this));}
dot.widgets.GetLocaleDate.prototype.init=function(){this.renderDateTime();this.renderFullMonth();this.renderRelativeDate();};dot.provide('dot.widgets.Typewriter404.js');dot.widgets.Typewriter404=function(element){this.element=element;};dot.widgets.Typewriter404.prototype.element=null;dot.widgets.Typewriter404.prototype.print404Message=function(messageParam,callback){var index=0,message='404',link='',element=this.element;if(typeof messageParam==='string'){message=messageParam;}else if(Array.isArray(messageParam)){message=messageParam[dot.utils.getRandomInt(0,messageParam.length)];}else if(typeof messageParam==='object'&&messageParam!=null){var messageLinkObject=Object.getOwnPropertyNames(messageParam).sort();link=messageLinkObject[dot.utils.getRandomInt(0,messageLinkObject.length)];message=messageParam[link];}
var timer=setInterval(function(){if(!link){element.innerHTML=message.substr(0,index+1);}else{element.innerHTML='<a href="'+link+'">'+message.substr(0,index+1)+'</a>';}
if(++index===message.length){clearInterval(timer);setTimeout(function(){if(callback&&typeof callback==='function'){callback();}},2500);}},50);};;dot.provide('dot.ui');dot.ui.Modal=function(element){this.element=element;this.assignCloseButtonBehavior();this.assignEscapeKeyBehavior();};dot.ui.Modal.DD_ACTIVE_CLASS='dd-active';dot.ui.Modal.DD_CLOSE_BUTTON_CLASS='dd-close-button';dot.ui.Modal.prototype.element=null;dot.ui.Modal.prototype.hideModal=function(){this.element.classList.remove(dot.ui.Modal.DD_ACTIVE_CLASS);};dot.ui.Modal.prototype.showModal=function(){this.element.classList.add(dot.ui.Modal.DD_ACTIVE_CLASS);};dot.ui.Modal.prototype.assignCloseButtonBehavior=function(){var hide=this.hideModal.bind(this);var buttons=this.element.getElementsByClassName(dot.ui.Modal.DD_CLOSE_BUTTON_CLASS);Array.from(buttons).forEach(function(button){button.addEventListener('click',hide);});};dot.ui.Modal.prototype.assignEscapeKeyBehavior=function(){var hide=this.escapeHide.bind(this);document.addEventListener('keyup',hide);};dot.ui.Modal.prototype.escapeHide=function(event){if(event.keyCode==27){this.hideModal();}};dot.ui.Modal.prototype.getElement=function(){return this.element;};;dot.provide('dot.ui');dot.ui.TabBar=dot.utils.oop.extend(dot.events.EventTarget,function(controlElement,contentContainer){dot.events.EventTarget.call(this);this.tabBarElement=controlElement;this.tabContentContainerElement=contentContainer;this.assignTabBehavior();});dot.ui.TabBar.DD_ACTIVE_CLASS='dd-active';dot.ui.TabBar.INDEX_CHANGED='indexChanged';dot.ui.TabBar.prototype.tabBarElement=null;dot.ui.TabBar.prototype.tabContentContainerElement=null;dot.ui.TabBar.prototype.hideTabContent=function(){var close=function(child){child.classList.remove(dot.ui.TabBar.DD_ACTIVE_CLASS);};Array.from(this.tabBarElement.children).forEach(close);Array.from(this.tabContentContainerElement.children).forEach(close);};dot.ui.TabBar.prototype.showTabContent=function(index){this.tabBarElement.children[index].classList.add(dot.ui.TabBar.DD_ACTIVE_CLASS);this.tabContentContainerElement.children[index].classList.add(dot.ui.TabBar.DD_ACTIVE_CLASS);};dot.ui.TabBar.prototype.tabClickHandler=function(e){var index=dot.utils.dom.getChildIndex(e.target);this.notifyIndexChanged(index);};dot.ui.TabBar.prototype.notifyIndexChanged=function(index){var event=new CustomEvent(dot.ui.TabBar.INDEX_CHANGED);event.index=index;this.dispatchEvent(event);};dot.ui.TabBar.prototype.onIndexChangedHandler=function(event){this.hideTabContent();this.showTabContent(event.index);};dot.ui.TabBar.prototype.assignTabBehavior=function(){var activate=this.tabClickHandler.bind(this);Array.from(this.tabBarElement.children).forEach(function(tab){tab.addEventListener('click',activate);});this.addEventListener(dot.ui.TabBar.INDEX_CHANGED,this.onIndexChangedHandler.bind(this));};dot.ui.TabBar.prototype.getTabBarElement=function(){return this.tabBarElement;};dot.ui.TabBar.prototype.getContentContainerElement=function(){return this.tabContentContainerElement;};;dot.provide('dot.newsreader.widgets');dot.newsreader.widgets.DrawerToggle=function(elements){this.elements=elements;this.dim=this.dim.bind(this);this.undim=this.undim.bind(this);this.updateDisplay=this.updateDisplay.bind(this);this.updateDrawerDisplay=this.updateDrawerDisplay.bind(this);this.toggleMenu=this.toggleMenu.bind(this);this.showMenu=this.showMenu.bind(this);this.hideMenu=this.hideMenu.bind(this);this.reactToScrollChange=this.reactToScrollChange.bind(this);this.setOpacityParticipatory=this.setOpacityParticipatory.bind(this);var react=this.reactToScrollChange;dot.widgets.LayoutManager.LAYOUT_EVENTS.forEach(function(event){window.addEventListener(event,react);});this.elements.navbar.addEventListener('click',this.reactToScrollChange);this.elements.toggler.addEventListener('click',this.toggleMenu);this.elements.opener.addEventListener('click',this.toggleMenu);this.reactToScrollChange();this.updateDisplay();};dot.newsreader.widgets.DrawerToggle.CONTENT_INTERACTION_EVENTS=['mousedown','touchstart','touchmove'];dot.newsreader.widgets.DrawerToggle.OPEN_CLASS='dd-drawer-open';dot.newsreader.widgets.DrawerToggle.prototype.opened=false;dot.newsreader.widgets.DrawerToggle.prototype.y=0;dot.newsreader.widgets.DrawerToggle.prototype.opacityPositional=0;dot.newsreader.widgets.DrawerToggle.prototype.opacityParticipatory=1;dot.newsreader.widgets.DrawerToggle.prototype.elements=null;dot.newsreader.widgets.DrawerToggle.prototype.dimTimeoutId=0;dot.newsreader.widgets.DrawerToggle.prototype.dimOpacity=0.4;dot.newsreader.widgets.DrawerToggle.prototype.dimDelay=4000;dot.newsreader.widgets.DrawerToggle.prototype.drawerDisplayUpdateDelay=200;dot.newsreader.widgets.DrawerToggle.prototype.opacityTweenDuration=400;dot.newsreader.widgets.DrawerToggle.prototype.hasPendingDisplayUpdate=false;dot.newsreader.widgets.DrawerToggle.prototype.animator=null;dot.newsreader.widgets.DrawerToggle.prototype.pendingAnimationFrameId=0;dot.newsreader.widgets.DrawerToggle.prototype.cancelScheduledDim=function(){window.clearTimeout(this.dimTimeoutId);};dot.newsreader.widgets.DrawerToggle.prototype.cancelScheduledDisplayUpdate=function(){window.cancelAnimationFrame(this.pendingAnimationFrameId);};dot.newsreader.widgets.DrawerToggle.prototype.requestDisplayUpdate=function(){if(!this.hasPendingDisplayUpdate){this.hasPendingDisplayUpdate=true;this.pendingAnimationFrameId=window.requestAnimationFrame(this.updateDisplay);}};dot.newsreader.widgets.DrawerToggle.prototype.getComputedOpacity=function(){return this.opacityPositional*this.opacityParticipatory;};dot.newsreader.widgets.DrawerToggle.prototype.updateDisplay=function(){this.elements.toggler.style.top=this.y+'px';var opacity=this.getComputedOpacity();this.elements.toggler.style.opacity=opacity;this.elements.toggler.style.display=(opacity>0)?'block':'none';this.hasPendingDisplayUpdate=false;};dot.newsreader.widgets.DrawerToggle.prototype.setY=function(y){this.y=y;this.updateDisplay();};dot.newsreader.widgets.DrawerToggle.prototype.scheduleY=function(y){this.y=y;this.requestDisplayUpdate();};dot.newsreader.widgets.DrawerToggle.prototype.setOpacityPositional=function(opacity){this.opacityPositional=opacity;this.updateDisplay();};dot.newsreader.widgets.DrawerToggle.prototype.scheduleOpacityPositional=function(opacity){this.opacityPositional=opacity;this.requestDisplayUpdate();};dot.newsreader.widgets.DrawerToggle.prototype.setOpacityParticipatory=function(opacity){this.opacityParticipatory=opacity;this.updateDisplay();};dot.newsreader.widgets.DrawerToggle.prototype.scheduleOpacityParticipatory=function(opacity){this.opacityParticipatory=opacity;this.requestDisplayUpdate();};dot.newsreader.widgets.DrawerToggle.prototype.getOffsetHeight=function(){return this.elements.navbar.clientHeight+this.elements.search.clientHeight;};dot.newsreader.widgets.DrawerToggle.prototype.getPercentShowing=function(){var bounds=this.elements.navbar.getBoundingClientRect();if(bounds.top>0){return 0;}
var height=this.getOffsetHeight();var showing=-bounds.top/height;showing=showing||0;showing=Math.max(showing,0);showing=Math.min(showing,1);return showing;};dot.newsreader.widgets.DrawerToggle.prototype.reactToScrollChange=function(){var height=this.getOffsetHeight();var showing=this.getPercentShowing();var y=height-(height*showing);this.scheduleOpacityPositional(showing);this.scheduleY(y);this.scheduleDim();};dot.newsreader.widgets.DrawerToggle.prototype.scheduleDim=function(){this.cancelScheduledDim();this.dimTimeoutId=window.setTimeout(this.dim,this.dimDelay);};dot.newsreader.widgets.DrawerToggle.prototype.getAnimator=function(){if(this.animator==null){this.animator=new dot.animation.ValueAnimator();this.animator.setDuration(this.opacityTweenDuration);this.animator.setEasingFunction(dot.animation.Easing.Quart.easeOut);this.animator.setProgressCallback(this.setOpacityParticipatory);}
return this.animator;};dot.newsreader.widgets.DrawerToggle.prototype.tweenParticipatoryOpacityTo=function(to){if(this.opacityParticipatory==to){return;}
var animator=this.getAnimator();animator.stop();animator.setValues(this.opacityParticipatory,to);animator.start();};dot.newsreader.widgets.DrawerToggle.prototype.dim=function(){this.tweenParticipatoryOpacityTo(this.dimOpacity);var undim=this.undim;var events=dot.widgets.LayoutManager.LAYOUT_EVENTS.concat(dot.newsreader.widgets.DrawerToggle.CONTENT_INTERACTION_EVENTS);events.forEach(function(event){window.addEventListener(event,undim);});};dot.newsreader.widgets.DrawerToggle.prototype.undim=function(){this.tweenParticipatoryOpacityTo(1);var undim=this.undim;var events=dot.widgets.LayoutManager.LAYOUT_EVENTS.concat(dot.newsreader.widgets.DrawerToggle.CONTENT_INTERACTION_EVENTS);events.forEach(function(event){window.removeEventListener(event,undim);});};dot.newsreader.widgets.DrawerToggle.prototype.manageEvent=function(event){if(event){event.preventDefault();event.stopPropagation();}
return false;};dot.newsreader.widgets.DrawerToggle.prototype.scheduleDrawerDisplayUpdate=function(){window.setTimeout(this.updateDrawerDisplay,this.drawerDisplayUpdateDelay);};dot.newsreader.widgets.DrawerToggle.prototype.updateDrawerDisplay=function(){this.elements.drawer.style.display=this.opened?'block':'none';};dot.newsreader.widgets.DrawerToggle.prototype.showMenu=function(e){if(this.opened){return;}
this.opened=true;document.documentElement.classList.add(dot.newsreader.widgets.DrawerToggle.OPEN_CLASS);var hide=this.hideMenu;var element=this.elements.content;dot.newsreader.widgets.DrawerToggle.CONTENT_INTERACTION_EVENTS.forEach(function(event){element.addEventListener(event,hide);});this.reactToScrollChange();this.updateDrawerDisplay();this.manageEvent(e);};dot.newsreader.widgets.DrawerToggle.prototype.hideMenu=function(e){if(!this.opened){return;}
this.opened=false;document.documentElement.classList.remove(dot.newsreader.widgets.DrawerToggle.OPEN_CLASS);var hide=this.hideMenu;var element=this.elements.content;dot.newsreader.widgets.DrawerToggle.CONTENT_INTERACTION_EVENTS.forEach(function(event){element.removeEventListener(event,hide);});this.scheduleDrawerDisplayUpdate();this.reactToScrollChange();this.manageEvent(e);};dot.newsreader.widgets.DrawerToggle.prototype.toggleMenu=function(e){if(this.opened){this.hideMenu(e);}else{this.showMenu(e);}};;dot.provide('dot.newsreader.ui');dot.newsreader.ui.LinkManager=dot.utils.oop.extend(dot.events.EventTarget,function(){dot.events.EventTarget.call(this);});dot.utils.oop.singleton(dot.newsreader.ui.LinkManager);dot.newsreader.ui.LinkManager.prototype.linkStyleClassNamePrefix='dd-link-';dot.newsreader.ui.LinkManager.prototype.linkStyleClassNameInternal='dd-link-internal';dot.newsreader.ui.LinkManager.prototype.linkStyleClassNameExternal='dd-link-external';dot.newsreader.ui.LinkManager.prototype.regexpInternal=new RegExp('dailydot\\.com');dot.newsreader.ui.LinkManager.prototype.addLinkStyle=function(link){var href=link.getAttribute('href');link.className=link.className+' '
+(href.match(this.regexpInternal)?this.linkStyleClassNameInternal:this.linkStyleClassNameExternal);}
dot.newsreader.ui.LinkManager.prototype.apply=function(content){var links=content.getElementsByTagName('a');for(var j=0,y=links.length;j<y;j++){var link=links[j];if(link.className.indexOf(this.linkStyleClassNamePrefix)==-1){this.addLinkStyle(link);}}};dot.provide('dot.newsreader.ui');dot.newsreader.ui.ArticleAppender=function(container){this.container=container;};dot.newsreader.ui.ArticleAppender.CHILDREN_QUERY_SELECTOR='div>*';dot.newsreader.ui.ArticleAppender.EMBED_CLASS='ddgce-embed';dot.newsreader.ui.ArticleAppender.DISQUALIFY_TAGS_FOR_APPEND=['embed','iframe'];dot.newsreader.ui.ArticleAppender.TOMBSTONE_CLASSNAME='dd-small-dot';dot.newsreader.ui.ArticleAppender.prototype.append=function(){var tombstone=document.createElement('div');tombstone.className=dot.newsreader.ui.ArticleAppender.TOMBSTONE_CLASSNAME;var children=this.container.querySelectorAll(dot.newsreader.ui.ArticleAppender.CHILDREN_QUERY_SELECTOR);for(var i=children.length-1;i>=0;i--){var child=children[i];var hasContent=notEmbed=(child.children.length==0);if(this.nodeIsDisqualified(child)){continue;}
for(var j=child.children.length-1;j>=0;j--){var grandchild=child.children[j];hasContent=this.nodeHasContent(grandchild);if(!this.nodeIsDisqualified(grandchild)){notEmbed=true;break;}}
if(hasContent&&notEmbed){child.appendChild(tombstone);break;}}};dot.newsreader.ui.ArticleAppender.prototype.nodeIsDisqualified=function(node){return this.nodeHasDisqualifyingNodeName(node)||this.nodeHasDisqualifyingNodeClass(node);};dot.newsreader.ui.ArticleAppender.prototype.nodeHasDisqualifyingNodeName=function(node){var tagName=node.nodeName.toLowerCase();var index=dot.newsreader.ui.ArticleAppender.DISQUALIFY_TAGS_FOR_APPEND.indexOf(tagName);return index>-1;};dot.newsreader.ui.ArticleAppender.prototype.nodeHasDisqualifyingNodeClass=function(node){var index=node.className.indexOf(dot.newsreader.ui.ArticleAppender.EMBED_CLASS)
return index>-1;};dot.newsreader.ui.ArticleAppender.prototype.nodeHasContent=function(node){return(node.innerHTML.length>0);};;dot.provide('dot.newsreader.ui');dot.newsreader.ui.TierOrganizer=function(container){this.container=container;};dot.newsreader.ui.TierOrganizer.TIERED_SELECTORS=['.article-image','.ddgce-embed'];dot.newsreader.ui.TierOrganizer.ANCHOR_SELECTORS=['p'];dot.newsreader.ui.TierOrganizer.FULLWIDTH_EXCEPTIONS=['twitter.com','vine.com','instagram.com'];dot.newsreader.ui.TierOrganizer.REDUCTION_VERTICAL_OFFSET=500;dot.newsreader.ui.TierOrganizer.prototype.reorganize=function(){if(!this.container.children.length){return;}
var topLevel=this.container.children[0];var children=topLevel.children;if(topLevel.closest(".dd-article-container").className.indexOf("dd-article-style-default")>=0){var firstTierDetected=false;for(var i=0,x=children.length;!firstTierDetected&&i<x;i++){var child=children[i];for(var j=0,y=dot.newsreader.ui.TierOrganizer.TIERED_SELECTORS.length;j<y;j++){if(child.matches(dot.newsreader.ui.TierOrganizer.TIERED_SELECTORS[j])){child.className+=" dd-article-tier-inline";if(child.offsetTop<dot.newsreader.ui.TierOrganizer.REDUCTION_VERTICAL_OFFSET){child.className+=" dd-article-tier-reduced";}
firstTierDetected=true;break;}}}}
var sibling=null;var siblingQualified=false;for(var i=children.length-1;i>=0;i--){var child=children[i];var isQualified=false;for(var j=0,y=dot.newsreader.ui.TierOrganizer.TIERED_SELECTORS.length;j<y;j++){if(child.matches(dot.newsreader.ui.TierOrganizer.TIERED_SELECTORS[j])){isQualified=true;break;}}
if(isQualified&&child.className.indexOf("dd-article-tier")==-1){child.className+=" dd-article-tier-inline";}
sibling=child;siblingQualified=isQualified;}};dot.newsreader.ui.TierOrganizer.prototype.nodeEligibleForFullWidth=function(node){var isEligible=true;var content=node.innerHTML;for(var i=0,x=dot.newsreader.ui.TierOrganizer.FULLWIDTH_EXCEPTIONS.length;i<x;i++){if(content.indexOf(dot.newsreader.ui.TierOrganizer.FULLWIDTH_EXCEPTIONS[i])>=0){isEligible=false;break;}}
return isEligible;};;dot.provide('dot.newsreader.ui');dot.newsreader.ui.Dropdown=function(element){this.element=element;this.element.addEventListener('mouseenter',this.open.bind(this));this.element.addEventListener('mouseleave',this.requestClose.bind(this));this.siblings=[];this.close=this.close.bind(this);};dot.newsreader.ui.Dropdown.DEFAULT_HIDE_BUFFER=300;dot.newsreader.ui.Dropdown.CSS_OPEN_CLASS='dd-active';dot.newsreader.ui.Dropdown.prototype.element=null;dot.newsreader.ui.Dropdown.prototype.hideBuffer=dot.newsreader.ui.Dropdown.DEFAULT_HIDE_BUFFER;dot.newsreader.ui.Dropdown.prototype.timeout=-1;dot.newsreader.ui.Dropdown.prototype.siblings=null;dot.newsreader.ui.Dropdown.prototype.addSibling=function(sibling){this.siblings.push(sibling);};dot.newsreader.ui.Dropdown.prototype.addSiblings=function(siblings){if(siblings instanceof dot.newsreader.ui.Dropdown){this.addSiblings.apply(this,arguments);}else{Array.from(siblings).forEach(this.addSibling.bind(this));}};dot.newsreader.ui.Dropdown.prototype.open=function(){window.clearTimeout(this.timeout);this.siblings.forEach(this.closeSibling);this.element.classList.add(dot.newsreader.ui.Dropdown.CSS_OPEN_CLASS);};dot.newsreader.ui.Dropdown.prototype.closeSibling=function(sibling){sibling.close();};dot.newsreader.ui.Dropdown.prototype.close=function(){window.clearTimeout(this.timeout);this.element.classList.remove(dot.newsreader.ui.Dropdown.CSS_OPEN_CLASS);};dot.newsreader.ui.Dropdown.prototype.requestClose=function(){window.clearTimeout(this.timeout);this.timeout=window.setTimeout(this.close,this.hideBuffer);};;dot.provide('dot.newsreader.ui');dot.newsreader.ui.CarouselAdapter=dot.utils.oop.extend(dot.widgets.ViewPagerAdapter,function(data){dot.widgets.ViewPagerAdapter.call(this,data);var cache=new dot.widgets.ViewPagerAdapter.SimplePagerCache();this.installCache(cache);});dot.newsreader.ui.CarouselAdapter.prototype.expand=function(item){var container=document.createElement('a');container.href=item.url;container.className='dd-carousel-slide dd-carousel-slide-'+item.type;container.style.backgroundImage='url('+item.image+')';var caption=document.createElement('div');caption.className='dd-carousel-caption';caption.textContent=item.title;container.appendChild(caption);return container;};;dot.provide('dot.newsreader.ui');dot.newsreader.ui.Carousel=dot.utils.oop.extend(dot.widgets.ViewPager,function(data){dot.widgets.ViewPager.call(this);var adapter=new dot.newsreader.ui.CarouselAdapter(data);this.setAdapter(adapter);this.constructPagerDots();this.startAutoAdvance();});dot.newsreader.ui.Carousel.prototype.constructPagerDots=function(){var container=document.createElement('div');container.id='dd-carousel-dot-container';var count=this.getAdapter().getItems().length;container.style.marginLeft=-(count*15)+'px';for(var i=0;i<count;i++){var pagerDot=document.createElement('div');pagerDot.setAttribute('data-index',i);if(i===0){pagerDot.classList.add('dd-active');}
container.appendChild(pagerDot);}
container.addEventListener('click',this.dotClickHandler.bind(this));this.addEventListener(dot.widgets.ViewPager.Events.INDEX_CHANGED,this.showActiveDot.bind(this));this.elementContainer.appendChild(container);};dot.newsreader.ui.Carousel.prototype.dotClickHandler=function(e){var pagerDot=e.target;if(pagerDot.hasAttribute('data-index')){e.preventDefault();e.stopPropagation();var index=pagerDot.getAttribute('data-index');this.slideTo(index);this.cancelAutoAdvance();}};dot.newsreader.ui.Carousel.prototype.showActiveDot=function(e){var container=document.getElementById('dd-carousel-dot-container');var index=e.index;if(typeof index=='undefined'){return;}
for(var i=0,l=container.children.length;i<l;i++){var child=container.children[i];if(i==index){child.classList.add('dd-active');}else{child.classList.remove('dd-active');}}};dot.newsreader.ui.Carousel.prototype.getDom=function(){this.elementContainer=document.getElementById('dd-carousel-wrapper');this.elementSlider=this.elementContainer.firstElementChild;this.elementCenter=this.elementSlider.firstElementChild;this.elementLeft=this.elementCenter.cloneNode(false);this.elementLeft.style.left='-100%';this.elementSlider.insertBefore(this.elementLeft,this.elementCenter);this.elementRight=this.elementCenter.cloneNode(false);this.elementRight.style.left='100%';this.elementSlider.appendChild(this.elementRight);};;dot.provide('dot.newsreader.ui');dot.newsreader.ui.NavigationStateManager=dot.utils.oop.extend(dot.events.EventTarget,function(){dot.events.EventTarget.call(this);this.flagAsScrolling=this.flagAsScrolling.bind(this);this.triggerStateChecker=this.triggerStateChecker.bind(this);this.showDropdown=this.showDropdown.bind(this);this.hideDropdown=this.hideDropdown.bind(this);this.toggleDropdown=this.toggleDropdown.bind(this);});dot.newsreader.ui.NavigationStateManager.POLLING_FREQUENCY=100;dot.newsreader.ui.NavigationStateManager.SCROLL_BUFFER_DISTANCE=30;dot.newsreader.ui.NavigationStateManager.SCROLL_UPPER_BOUND=225;dot.newsreader.ui.NavigationStateManager.prototype.navigationContainerClass='dd-nav-global';dot.newsreader.ui.NavigationStateManager.prototype.globalNavigationId='dd-nav-global-top';dot.newsreader.ui.NavigationStateManager.prototype.downwardNavigationId='dd-nav-global-downward';dot.newsreader.ui.NavigationStateManager.prototype.upwardNavigationId='dd-nav-global-upward';dot.newsreader.ui.NavigationStateManager.prototype.dropdownId='dd-nav-dropdown';dot.newsreader.ui.NavigationStateManager.prototype.sectionSubnavigationId='dd-nav-global-subnav';dot.newsreader.ui.NavigationStateManager.prototype.fragmentClassNamePrefix='dd-well';dot.newsreader.ui.NavigationStateManager.prototype.buttonClassNamePrefix='dd-nav-button';dot.newsreader.ui.NavigationStateManager.prototype.buttonClassNameNavButton='dd-nav-button';dot.newsreader.ui.NavigationStateManager.prototype.buttonClassNameShowMore='dd-nav-button-show-more';dot.newsreader.ui.NavigationStateManager.prototype.fadeClassNamePrefix='dd-fade-';dot.newsreader.ui.NavigationStateManager.prototype.fragmentButtonClassName='dd-nav-wells-button';dot.newsreader.ui.NavigationStateManager.prototype.activeClassName='dd-active';dot.newsreader.ui.NavigationStateManager.prototype.topAd='dd-ad-head';dot.newsreader.ui.NavigationStateManager.prototype.showMoreButtons=document.querySelectorAll('.dd-nav-button-show-more');dot.newsreader.ui.NavigationStateManager.prototype.scrollPositionInitial=0;dot.newsreader.ui.NavigationStateManager.prototype.isScrolling=false;dot.newsreader.ui.NavigationStateManager.prototype.boundTop=0;dot.newsreader.ui.NavigationStateManager.prototype.boundBottom=0;dot.newsreader.ui.NavigationStateManager.prototype.isHomePage=document.body.className.indexOf('dd-pagetype-homepage')>-1;dot.newsreader.ui.NavigationStateManager.prototype.isMobile=('ontouchstart'in window||navigator.maxTouchPoints);dot.newsreader.ui.NavigationStateManager.prototype.setActiveFragmentButton=function(){var fragments=document.getElementsByClassName(this.fragmentClassNamePrefix);var pattern=new RegExp(this.fragmentClassNamePrefix+'-type-([\\w-]+)');var fragmentClass='';var clientHeight=(window.innerHeight||document.documentElement.clientHeight);for(var i=0,x=fragments.length;i<x;i++){var fragment=fragments[i];var rect=fragment.getBoundingClientRect();if(rect.top<clientHeight/2){var matchResults=fragment.className.match(pattern);if(matchResults){fragmentClass=matchResults[1];}}}
var buttons=document.getElementsByClassName(this.fragmentButtonClassName);for(var i=0,x=buttons.length;i<x;i++){var button=buttons[i];if(fragmentClass&&button.className.indexOf(fragmentClass)>=0){if(button.className.indexOf(this.activeClassName)==-1){button.className=button.className+' '+this.activeClassName;}}else{button.className=button.className.replace(this.activeClassName,'').trim();}}};dot.newsreader.ui.NavigationStateManager.prototype.flagAsScrolling=function(){this.isScrolling=true;};dot.newsreader.ui.NavigationStateManager.prototype.stateChange=function(){var scrollPosition=window.scrollY;var downward=document.getElementById(this.downwardNavigationId);var upward=document.getElementById(this.upwardNavigationId);var dropdown=document.getElementById(this.dropdownId);var section=document.getElementById(this.sectionSubnavigationId);var globalNav=document.getElementById(this.globalNavigationId);var topAd=document.getElementById(this.topAd);if(this.isHomePage){this.setActiveFragmentButton();}
if(topAd.getBoundingClientRect().bottom<=0){globalNav.classList.add('dd-fade-out');if(scrollPosition<=this.boundTop){upward.classList.add('dd-fade-in');upward.classList.remove('dd-fade-out');downward.classList.remove('dd-fade-in');downward.classList.add('dd-fade-out');this.boundTop=scrollPosition-dot.newsreader.ui.NavigationStateManager.SCROLL_BUFFER_DISTANCE;this.boundBottom=scrollPosition+dot.newsreader.ui.NavigationStateManager.SCROLL_BUFFER_DISTANCE;}else if(scrollPosition>=this.boundBottom){upward.classList.add('dd-fade-out');upward.classList.remove('dd-fade-in');downward.classList.add('dd-fade-in');downward.classList.remove('dd-fade-out');if(section){section.style.display="flex";}
this.boundTop=scrollPosition-dot.newsreader.ui.NavigationStateManager.SCROLL_BUFFER_DISTANCE;this.boundBottom=scrollPosition+dot.newsreader.ui.NavigationStateManager.SCROLL_BUFFER_DISTANCE;}
dropdown.style.position="fixed";dropdown.style.display="none";this.hideShowMoreCloseButton();}else{upward.classList.remove('dd-fade-in');globalNav.classList.remove('dd-fade-out');downward.classList.remove('dd-fade-in');if(section){section.style.display="none";}
this.boundTop=0;this.boundBottom=dot.newsreader.ui.NavigationStateManager.SCROLL_UPPER_BOUND;dropdown.style.position="absolute";dropdown.style.display="none";}};dot.newsreader.ui.NavigationStateManager.prototype.triggerStateChecker=function(){if(this.isScrolling){this.isScrolling=false;this.stateChange();}};dot.newsreader.ui.NavigationStateManager.prototype.toggleDropdown=function(evt){evt.preventDefault();var that=this;var dropdown=document.getElementById(this.dropdownId);var pattern=new RegExp(this.buttonClassNamePrefix+'-([\\w-]+)');var matchResults=evt.currentTarget.className.match(pattern);if(matchResults){var fragment=matchResults[1];Array.from(dropdown.children).forEach(function(child){if(child.className.indexOf(that.dropdownId+'-'+fragment)>=0){child.style.display=(child.style.display=='block'?'none':'block');dropdown.style.display=(child.style.display=='block'?'block':'none');if(that.isShowMoreOpen()){that.showShowMoreCloseButton()}else{that.hideShowMoreCloseButton();}}else{child.style.display='none';that.hideShowMoreCloseButton();}});}
this.calculateDropdownLeft(evt.currentTarget,dropdown);};dot.newsreader.ui.NavigationStateManager.prototype.showDropdown=function(evt){evt.preventDefault();var that=this;var dropdown=document.getElementById(this.dropdownId);var pattern=new RegExp(this.buttonClassNamePrefix+'-([\\w-]+)');var matchResults=evt.currentTarget.className.match(pattern);if(matchResults){var fragment=matchResults[1];Array.from(dropdown.children).forEach(function(child){if(child.className.indexOf(that.dropdownId+'-'+fragment)>=0){child.style.display='block';dropdown.style.display='block';}else{child.style.display='none';}});}
this.calculateDropdownLeft(evt.currentTarget,dropdown);};dot.newsreader.ui.NavigationStateManager.prototype.mouseOverElement=function(evt,elem){var rect=elem.getBoundingClientRect();return(evt.clientY>rect.top&&evt.clientY<rect.bottom&&evt.clientX>rect.left&&evt.clientX<rect.right);};dot.newsreader.ui.NavigationStateManager.prototype.hideDropdown=function(evt){evt.preventDefault();var navbar=document.querySelector("."+this.navigationContainerClass),top=document.getElementById(this.globalNavigationId),upward=document.getElementById(this.upwardNavigationId),downward=document.getElementById(this.downwardNavigationId),dropdown=document.getElementById(this.dropdownId);if(this.mouseOverElement(evt,navbar)||this.mouseOverElement(evt,dropdown)||this.mouseOverElement(evt,top)||this.mouseOverElement(evt,upward)||this.mouseOverElement(evt,downward)){return;}
Array.from(dropdown.children).forEach(function(child){child.style.display='none';});dropdown.style.display='none';};dot.newsreader.ui.NavigationStateManager.prototype.initializeStateManagement=function(){var self=this;this.scrollPositionInitial=window.scrollY;this.boundTop=0-dot.newsreader.ui.NavigationStateManager.SCROLL_BUFFER_DISTANCE;this.boundBottom=dot.newsreader.ui.NavigationStateManager.SCROLL_BUFFER_DISTANCE;window.addEventListener('scroll',this.flagAsScrolling);var buttons=document.getElementsByClassName(this.fragmentButtonClassName);for(var i=0,x=buttons.length;i<x;i++){var button=buttons[i];if(!this.isHomePage){if(this.isMobile){button.addEventListener('click',this.toggleDropdown);}else{button.addEventListener('mouseover',this.showDropdown);}}}
var showMoreButtons=document.getElementsByClassName(this.buttonClassNameShowMore);for(var j=0;j<showMoreButtons.length;j++){var showMoreButton=showMoreButtons[j];if(this.isMobile){showMoreButton.addEventListener('click',this.toggleDropdown);}else{showMoreButton.addEventListener('mouseover',this.showDropdown);}}
if(!this.isMobile){var navContainer=document.querySelector("."+this.navigationContainerClass);navContainer.addEventListener('mouseout',this.hideDropdown);}
dot.widgets.LayoutManager.getInstance().addLayoutUpdateListener(self.triggerStateChecker);};dot.newsreader.ui.NavigationStateManager.prototype.calculateDropdownLeft=function(button,dropdown){var rect=button.getBoundingClientRect(),left=rect.left,rightOffset=parseInt(rect.right)-320;if(left>30&&left<300){dropdown.style.left=left+'px';}else if(left>300){dropdown.style.left=rightOffset+'px';}else{dropdown.style.left=0;}};dot.newsreader.ui.NavigationStateManager.prototype.isShowMoreOpen=function(){var result=false;var dropdown=document.getElementsByClassName('dd-nav-dropdown-show-more')[0];if(dropdown.style.display=='block'){result=true;}
return result;};dot.newsreader.ui.NavigationStateManager.prototype.showShowMoreCloseButton=function(){if(this.showMoreButtons){for(var i=0;i<this.showMoreButtons.length;i++){var button=this.showMoreButtons[i];button.classList.add('dd-expanded');}}};dot.newsreader.ui.NavigationStateManager.prototype.hideShowMoreCloseButton=function(){if(this.showMoreButtons){for(var i=0;i<this.showMoreButtons.length;i++){var button=this.showMoreButtons[i];button.classList.remove('dd-expanded');}}};;dot.provide('dot.newsreader.ui.PopupHelper');dot.newsreader.ui.PopupHelper=function(){};dot.utils.oop.singleton(dot.newsreader.ui.PopupHelper);dot.newsreader.ui.PopupHelper.prototype.gutter=20;dot.newsreader.ui.PopupHelper.prototype.offset=40;dot.newsreader.ui.PopupHelper.prototype.animator=null;dot.newsreader.ui.PopupHelper.prototype.popup=null;dot.newsreader.ui.PopupHelper.prototype.activator=null;dot.newsreader.ui.PopupHelper.prototype.duration=200;dot.newsreader.ui.PopupHelper.prototype.getAnimator=function(){if(this.animator==null){this.animator=new dot.animation.ValueAnimator();this.animator.setDuration(this.duration);this.animator.setEasingFunction(dot.animation.Easing.Quart.easeOut);this.animator.setValues(0,1);this.animator.setProgressCallback(this.update.bind(this));}
return this.animator;};dot.newsreader.ui.PopupHelper.prototype.update=function(progress){this.popup.style.marginTop=(this.offset-(progress*this.offset))+'px';this.popup.style.opacity=progress;};dot.newsreader.ui.PopupHelper.prototype.stop=function(){if(this.animator!=null){this.animator.stop();}
if(this.popup!=null){this.update(0);}};dot.newsreader.ui.PopupHelper.prototype.transitionInPopup=function(activator,popup,complete){this.stop();this.activator=activator;this.popup=popup;this.positionPopup();this.update(0);var animator=this.getAnimator();animator.getAnimationListener().onAnimationComplete=complete||function(){};animator.start();};dot.newsreader.ui.PopupHelper.prototype.getOffsetBottomOfElement=function(element){return element.offsetTop+element.offsetHeight;};dot.newsreader.ui.PopupHelper.prototype.getHorizontalCenterOfElement=function(element){return element.offsetWidth/2;};dot.newsreader.ui.PopupHelper.prototype.getOffsetHorizontalCenterOfActivator=function(){return this.activator.offsetLeft+this.getHorizontalCenterOfElement(this.activator);};dot.newsreader.ui.PopupHelper.prototype.getOffsetHorizontalCenterOfPopup=function(){return this.getHorizontalCenterOfElement(this.popup);};dot.newsreader.ui.PopupHelper.prototype.positionToBottomAndCenterOfActivator=function(){this.popup.style.top=this.getOffsetBottomOfElement(this.activator)+'px';this.popup.style.left=this.getOffsetHorizontalCenterOfActivator()-this.getOffsetHorizontalCenterOfPopup()+'px';};dot.newsreader.ui.PopupHelper.prototype.positionPopup=function(){this.popup.classList.remove('dd-popup-below-offset-left');this.popup.classList.remove('dd-popup-below-offset-right');this.positionToBottomAndCenterOfActivator();var rect=this.popup.getBoundingClientRect();if(rect.left<0){this.positionToRight();}
if(rect.right>window.innerWidth){this.positionToLeft();}};dot.newsreader.ui.PopupHelper.prototype.positionToRight=function(){var x=this.getOffsetHorizontalCenterOfActivator()-(this.gutter*2);this.popup.style.left=x+'px';this.popup.classList.add('dd-popup-below-offset-left');};dot.newsreader.ui.PopupHelper.prototype.positionToLeft=function(){var x=this.getOffsetHorizontalCenterOfActivator()-(this.popup.offsetWidth)+(this.gutter*2);this.popup.style.left=x+'px';this.popup.classList.add('dd-popup-below-offset-right');};;dot.provide('dot.newsreader.ui');dot.newsreader.ui.SatisfactionTabBar=dot.utils.oop.extend(dot.ui.TabBar,function(){var tabController=document.getElementById(dot.newsreader.ui.SatisfactionTabBar.TAB_BAR_ID);var contentContainer=document.getElementById(dot.newsreader.ui.SatisfactionTabBar.TAB_CONTENT_CONTAINER_ID);dot.ui.TabBar.call(this,tabController,contentContainer);});dot.newsreader.ui.SatisfactionTabBar.TAB_BAR_ID='dd-satisfaction-tab-bar';dot.newsreader.ui.SatisfactionTabBar.TAB_CONTENT_CONTAINER_ID='dd-satisfaction-tab-content';;dot.provide('dot.newsreader.ui');dot.newsreader.ui.SatisfactionModal=dot.utils.oop.extend(dot.ui.Modal,function(){var element=document.getElementById(dot.newsreader.ui.SatisfactionModal.MODAL_ID);dot.ui.Modal.call(this,element);this.issueType=dot.newsreader.ui.SatisfactionModal.ISSUE_TYPES[0];this.submitIssue=this.submitIssue.bind(this);this.tabBar=new dot.newsreader.ui.SatisfactionTabBar();this.tabBar.addEventListener(dot.newsreader.ui.SatisfactionTabBar.INDEX_CHANGED,this.setIssueTypeFromSelectedIndex.bind(this));this.submitButtonAction=this.submitButtonAction.bind(this);this.resetAfterThankYou=this.resetAfterThankYou.bind(this);this.onXhrCompleteHandler=this.onXhrCompleteHandler.bind(this);this.assignSubmitButtonBehavior();});dot.newsreader.ui.SatisfactionModal.MODAL_ID='dd-satisfaction-modal';dot.newsreader.ui.SatisfactionModal.DD_SUBMIT_BUTTON_ID='dd-satisfaction-save';dot.newsreader.ui.SatisfactionModal.DD_CREATE_ISSUE_URL='/satisfaction/issue/create/?';dot.newsreader.ui.SatisfactionModal.EventType={DD_XHR_COMPLETE:'complete'};dot.newsreader.ui.SatisfactionModal.ISSUE_TYPES=['SUGGESTION','COMPLIMENT','PROBLEM','OTHER'];dot.newsreader.ui.SatisfactionModal.THANK_YOU_HEADER="Thank you for your submission!";dot.newsreader.ui.SatisfactionModal.SATISFACTION_HEADER="We love to hear from you!";dot.newsreader.ui.SatisfactionModal.LOADING_HEADER="Loading...";dot.newsreader.ui.SatisfactionModal.MODAL_TIMEOUT=2000;dot.newsreader.ui.SatisfactionModal.prototype.tabBar=null;dot.newsreader.ui.SatisfactionModal.prototype.issueType="";dot.newsreader.ui.SatisfactionModal.prototype.submitButton=null;dot.newsreader.ui.SatisfactionModal.prototype.satisfactionHeader=null;dot.newsreader.ui.SatisfactionModal.prototype.satisfactionBody=null;dot.newsreader.ui.SatisfactionModal.prototype.activeTabController=null;dot.newsreader.ui.SatisfactionModal.prototype.setIssueTypeFromSelectedIndex=function(e){this.issueType=dot.newsreader.ui.SatisfactionModal.ISSUE_TYPES[e.index];};dot.newsreader.ui.SatisfactionModal.prototype.getSelectedForm=function(){return document.querySelector('.dd-ui-tab-content.dd-active form');};dot.newsreader.ui.SatisfactionModal.prototype.getDataValues=function(){var form=this.getSelectedForm();var data={};data.issue_type=this.issueType;var issueElement=form.querySelector('textarea[name="satisfaction-textarea"]');data.issue_text=issueElement.value;data.issue_url=form.querySelector('input[name="satisfaction-url-input"]').value;data.initiated_from=document.title;data.submitter=form.querySelector('input[name="satisfaction-user-name-input"]').value;data.contact=form.querySelector('input[name="satisfaction-user-contact-input"]').value;return data;};dot.newsreader.ui.SatisfactionModal.prototype.clearDataValues=function(){var form=this.getSelectedForm();var issueElement=form.querySelector('textarea[name="satisfaction-textarea"]');issueElement.value='';var issueUrl=form.querySelector('input[name="satisfaction-url-input"]');if(issueUrl!=null){issueUrl.value='';}
var submitter=form.querySelector('input[name="satisfaction-user-name-input"]');submitter.value='';var contact=form.querySelector('input[name="satisfaction-user-contact-input"]');contact.value='';};dot.newsreader.ui.SatisfactionModal.prototype.verifyContactField=function(data){var contactValue=data.contact;var emailRegex=dot.utils.net.EMAIL_REGEX;var twitterRegex=dot.utils.net.TWITTER_REGEX;var emailContactIsValid=emailRegex.test(contactValue);var twitterContactIsValid=twitterRegex.test(contactValue);return emailContactIsValid||twitterContactIsValid;};dot.newsreader.ui.SatisfactionModal.prototype.verifyMessageField=function(data){return data.issue_text!="";};dot.newsreader.ui.SatisfactionModal.prototype.sendData=function(data){var xhr=new XMLHttpRequest();xhr.addEventListener('load',this.onXhrCompleteHandler);var dataString=dot.utils.net.serialize(data);xhr.open('GET',dot.newsreader.ui.SatisfactionModal.DD_CREATE_ISSUE_URL+dataString);xhr.setRequestHeader('X-CSRFToken',dot.utils.net.cookies.get('csrftoken'));xhr.send(null);};dot.newsreader.ui.SatisfactionModal.prototype.submitIssue=function(data){var messageResult=this.verifyMessageField(data);var contactResult=this.verifyContactField(data);if(messageResult==false){this.noMessageErrorPrompt();}
if(contactResult==false){this.noContactErrorPrompt();}
if(messageResult==false||contactResult==false){return;}
this.deactivateSubmit();this.sendData(data);this.sayLoading();this.clearDataValues();};dot.newsreader.ui.SatisfactionModal.prototype.onXhrCompleteHandler=function(e){this.sayThankYou();this.assignSubmitButtonBehavior();};dot.newsreader.ui.SatisfactionModal.prototype.deactivateSubmit=function(){this.submitButton.removeEventListener('click',this.submitButtonAction);};dot.newsreader.ui.SatisfactionModal.prototype.getSatisfactionBody=function(){if(this.satisfactionBody==null){this.satisfactionBody=this.element.querySelector(".dd-ui-modal-body");}
return this.satisfactionBody;};dot.newsreader.ui.SatisfactionModal.prototype.hideBody=function(){this.getSatisfactionBody().classList.add('dd-hidden');};dot.newsreader.ui.SatisfactionModal.prototype.hideElement=function(element){element.classList.add('dd-hidden');};dot.newsreader.ui.SatisfactionModal.prototype.showBody=function(){this.getSatisfactionBody().classList.remove('dd-hidden');};dot.newsreader.ui.SatisfactionModal.prototype.getSatisfactionHeader=function(){if(this.satisfactionHeader==null){this.satisfactionHeader=this.element.querySelector(".dd-ui-modal-header");}
return this.satisfactionHeader;};dot.newsreader.ui.SatisfactionModal.prototype.setSatisfactionHeaderText=function(header){var satisfactionHeaderText=this.getSatisfactionHeader().querySelector('h3');satisfactionHeaderText.textContent=header;};dot.newsreader.ui.SatisfactionModal.prototype.sayThankYou=function(){this.setSatisfactionHeaderText(dot.newsreader.ui.SatisfactionModal.THANK_YOU_HEADER);window.setTimeout(this.resetAfterThankYou,dot.newsreader.ui.SatisfactionModal.MODAL_TIMEOUT);this.getSatisfactionHeader().classList.remove('dd-modal-header-spinner');};dot.newsreader.ui.SatisfactionModal.prototype.sayLoading=function(){this.hideBody();this.getSatisfactionHeader().classList.add('dd-modal-header-spinner');this.setSatisfactionHeaderText(dot.newsreader.ui.SatisfactionModal.LOADING_HEADER);};dot.newsreader.ui.SatisfactionModal.prototype.resetAfterThankYou=function(){this.setSatisfactionHeaderText(dot.newsreader.ui.SatisfactionModal.SATISFACTION_HEADER);this.showBody();this.hideModal();};dot.newsreader.ui.SatisfactionModal.prototype.submitButtonAction=function(event){event.preventDefault();this.hideErrorMessages();var data=this.getDataValues();this.submitIssue(data);};dot.newsreader.ui.SatisfactionModal.prototype.getSubmitButton=function(){if(this.submitButton==null){this.submitButton=document.getElementById(dot.newsreader.ui.SatisfactionModal.DD_SUBMIT_BUTTON_ID);}
return this.submitButton;};dot.newsreader.ui.SatisfactionModal.prototype.assignSubmitButtonBehavior=function(){this.getSubmitButton().addEventListener('click',this.submitButtonAction);};dot.newsreader.ui.SatisfactionModal.prototype.getActiveTabController=function(){var tabContent=document.getElementById('dd-satisfaction-tab-content');this.activeTabController=tabContent.querySelector('.dd-active');return this.activeTabController;};dot.newsreader.ui.SatisfactionModal.prototype.noMessageErrorPrompt=function(){var activeController=this.getActiveTabController();var error=activeController.querySelector('.dd-satisfaction-error-message-issue');error.classList.remove('dd-hidden');};dot.newsreader.ui.SatisfactionModal.prototype.noContactErrorPrompt=function(){var error=this.getActiveTabController().querySelector('.dd-satisfaction-error-message-contact');error.classList.remove('dd-hidden');};dot.newsreader.ui.SatisfactionModal.prototype.hideErrorMessages=function(){var errors=this.getActiveTabController().getElementsByClassName('dd-satisfaction-error-message');var errorsArray=Array.from(errors);errorsArray.forEach(this.hideElement);};;dot.provide('dot.newsreader.ui');dot.newsreader.ui.SatisfactionModalLoader=function(){};dot.newsreader.ui.SatisfactionModalLoader.FRAGMENT_URI='js/satisfaction-modal.html';dot.newsreader.ui.SatisfactionModalLoader.prototype.isLoading=false;dot.newsreader.ui.SatisfactionModalLoader.prototype.spinner=null;dot.newsreader.ui.SatisfactionModalLoader.prototype.modal=null;dot.newsreader.ui.SatisfactionModalLoader.prototype.getSpinner=function(){if(this.spinner==null){this.spinner=document.createElement('div');this.spinner.className='dd-modal-spinner';}
return this.spinner;};dot.newsreader.ui.SatisfactionModalLoader.prototype.showLoading=function(){document.body.appendChild(this.getSpinner());};dot.newsreader.ui.SatisfactionModalLoader.prototype.hideLoading=function(){var spinner=this.getSpinner();if(document.body==spinner.parentNode){document.body.removeChild(spinner);}};dot.newsreader.ui.SatisfactionModalLoader.prototype.load=function(){if(this.isLoading){return;}
this.isLoading=true;this.showLoading();var xhr=new XMLHttpRequest();xhr.addEventListener('load',this.onLoad.bind(this));xhr.addEventListener('error',this.onError.bind(this));xhr.open('GET',window.data.staticUrl+dot.newsreader.ui.SatisfactionModalLoader.FRAGMENT_URI);xhr.send(null);};dot.newsreader.ui.SatisfactionModalLoader.prototype.onLoad=function(e){this.isLoading=false;this.hideLoading();var xhr=e.target;var html=xhr.responseText;var fragment=dot.utils.dom.htmlToFragment(html);document.body.appendChild(fragment);this.modal=new dot.newsreader.ui.SatisfactionModal();this.showModal();};dot.newsreader.ui.SatisfactionModalLoader.prototype.onError=function(e){this.isLoading=false;this.hideLoading();window.alert('There was a problem getting data from the server.');};dot.newsreader.ui.SatisfactionModalLoader.prototype.showModal=function(){if(this.modal==null){return this.load();}
this.setFormValueByName('satisfaction-url-input',window.location.href);this.modal.showModal();};dot.newsreader.ui.SatisfactionModalLoader.prototype.setFormValueByName=function(name,value){Array.from(document.getElementById('dd-satisfaction-modal').querySelectorAll('[name="'+name+'"]')).forEach(function(element){element.value=value;});};dot.provide('dot.newsreader.ui');dot.newsreader.ui.BeggarModal=dot.utils.oop.extend(dot.ui.Modal,function(){var element=document.getElementById(dot.newsreader.ui.BeggarModal.MODAL_ID);dot.ui.Modal.call(this,element);var self=this;this.detectEndOfArticleAndShowModal=this.detectEndOfArticleAndShowModal.bind(this);this.endSharingContainer=document.querySelector('.end-sharing-container');this.layoutManager=dot.widgets.LayoutManager.getInstance();this.layoutManager.addLayoutUpdateListener(this.detectEndOfArticleAndShowModal);if(window.FB){window.FB.Event.subscribe('edge.create',function(url){self.hideModal(url,dot.newsreader.ui.BeggarModal.LikeState.LIKE);});window.FB.Event.subscribe('edge.remove',function(url){self.hideModal(url,dot.newsreader.ui.BeggarModal.LikeState.UNLIKE);});}});dot.newsreader.ui.BeggarModal.MODAL_ID='dd-beggar-modal';dot.newsreader.ui.BeggarModal.FacebookPages={POLITICS:'http://www.facebook.com/DotPolitics',ESPORTS:'https://www.facebook.com/DOTesports',GEEK:'https://www.facebook.com/DOTGeek',LOL:'https://www.facebook.com/dailydotLOL',DAILY_DOT:'http://www.facebook.com/dailydot'};dot.newsreader.ui.BeggarModal.BeggarCookie={POLITICS:'dot-politics-beggar',ESPORTS:'dot-esports-beggar',GEEK:'dot-geek-beggar',LOL:'dailydot-lol-beggar',DAILY_DOT:'dailydot-beggar'};dot.newsreader.ui.BeggarModal.LikeState={LIKE:'like',UNLIKE:'unlike'};dot.newsreader.ui.BeggarModal.prototype.layoutManager=null;dot.newsreader.ui.BeggarModal.prototype.endSharingContainer=null;dot.newsreader.ui.BeggarModal.prototype.detectEndOfArticleAndShowModal=function(){var bounds=this.endSharingContainer.getBoundingClientRect();if(bounds.top<window.innerHeight&&bounds.bottom>0){this.checkCookieToShowModalHandler();}};dot.newsreader.ui.BeggarModal.prototype.checkCookieToShowModalHandler=function(){this.layoutManager.removeLayoutUpdateListener(this.detectEndOfArticleAndShowModal);var metaTags=document.getElementsByTagName("meta");var page="no-facebook-page";for(var i=0;i<metaTags.length;i++){if(metaTags[i].getAttribute("property")=='article:section'){page=metaTags[i].getAttribute("content").toUpperCase();break;}}
var cookie=null;var cookieValue=0;if(!dot.newsreader.ui.BeggarModal.BeggarCookie.hasOwnProperty(page)){page='DAILY_DOT';}
if(dot.newsreader.ui.BeggarModal.BeggarCookie[page]){cookie=dot.utils.net.cookies.get(dot.newsreader.ui.BeggarModal.BeggarCookie[page]);cookieValue=parseInt(cookie,10);if(cookieValue!=1){this.showModal();}}};dot.newsreader.ui.BeggarModal.prototype.setCookieHandler=function(url,typeOfLike){var visits='0';var beggarCookie=dot.newsreader.ui.BeggarModal.BeggarCookie.DAILY_DOT;var expiry='1';switch(url){case dot.newsreader.ui.BeggarModal.FacebookPages.POLITICS:beggarCookie=dot.newsreader.ui.BeggarModal.BeggarCookie.POLITICS;break;case dot.newsreader.ui.BeggarModal.FacebookPages.ESPORTS:beggarCookie=dot.newsreader.ui.BeggarModal.BeggarCookie.ESPORTS;break;case dot.newsreader.ui.BeggarModal.FacebookPages.GEEK:beggarCookie=dot.newsreader.ui.BeggarModal.BeggarCookie.GEEK;break;case dot.newsreader.ui.BeggarModal.FacebookPages.LOL:beggarCookie=dot.newsreader.ui.BeggarModal.BeggarCookie.LOL;break;default:}
if(typeOfLike&&typeOfLike==dot.newsreader.ui.BeggarModal.LikeState.LIKE){visits='1';expiry='3154000000000000';}
dot.utils.net.cookies.set(beggarCookie,visits,expiry);};dot.newsreader.ui.BeggarModal.prototype.hideModal=function(url,typeOfLike){this.setCookieHandler(url,typeOfLike);this.super.hideModal.call(this);};;dot.provide('dot.newsreader.ui');dot.newsreader.ui.URLCopyButton=function(element){this.element=element;this.element.addEventListener('mouseenter',this.onMouseEnterHandler.bind(this));this.element.addEventListener('mouseleave',this.onMouseLeaveHandler.bind(this));this.element.addEventListener('click',this.onClickHandler.bind(this));this.hideCallout=this.hideCallout.bind(this);};dot.newsreader.ui.URLCopyButton.COMMAND='copy';dot.newsreader.ui.URLCopyButton.HIDE_DELAY=2000;dot.newsreader.ui.URLCopyButton.CSS={'CALLOUT_CLASS':'dd-sharing-callout','ACTIVE_CLASS':'dd-active'};dot.newsreader.ui.URLCopyButton.Labels={'HOVER':'Copy Link','COPIED':'Copied!','ERROR':'Your browser does not support click to copy'};dot.newsreader.ui.URLCopyButton.prototype.hideDelay=dot.newsreader.ui.URLCopyButton.HIDE_DELAY;dot.newsreader.ui.URLCopyButton.prototype.callout=null;dot.newsreader.ui.URLCopyButton.prototype.timeout=0;dot.newsreader.ui.URLCopyButton.prototype.linkToSelect=null;dot.newsreader.ui.URLCopyButton.prototype.getLinkToSelect=function(){if(this.linkToSelect==null){this.linkToSelect=document.createElement('a');this.linkToSelect.id='dd-temporary-link-for-range-selection';this.linkToSelect.textContent=this.element.getAttribute('href');var clone=this.element.cloneNode(true);for(var i=0;i<clone.children.length;i++){if(clone.children[i].hasChildNodes()){this.linkToSelect.appendChild(clone.children[i]);}}}
if(!document.getElementById('dd-temporary-link-for-range-selection')){document.body.appendChild(this.linkToSelect);}
return this.linkToSelect;};dot.newsreader.ui.URLCopyButton.prototype.select=function(){var range=document.createRange();range.selectNodeContents(this.getLinkToSelect());var selection=window.getSelection();selection.removeAllRanges();selection.addRange(range);};dot.newsreader.ui.URLCopyButton.prototype.deselect=function(){window.getSelection().removeAllRanges();document.body.removeChild(this.linkToSelect);};dot.newsreader.ui.URLCopyButton.prototype.copy=function(){try{return document.execCommand(dot.newsreader.ui.URLCopyButton.COMMAND);}catch(e){}
return false;};dot.newsreader.ui.URLCopyButton.prototype.getCallout=function(){if(this.callout==null){this.callout=document.createElement('div');this.callout.className=dot.newsreader.ui.URLCopyButton.CSS.CALLOUT_CLASS;document.body.appendChild(this.callout);}
return this.callout;};dot.newsreader.ui.URLCopyButton.prototype.hideCallout=function(){this.getCallout().classList.remove(dot.newsreader.ui.URLCopyButton.CSS.ACTIVE_CLASS);};dot.newsreader.ui.URLCopyButton.prototype.startHideMessageTimer=function(){this.timeout=window.setTimeout(this.hideCallout,this.hideDelay);};dot.newsreader.ui.URLCopyButton.prototype.showMessage=function(text){window.clearTimeout(this.timeout);var callout=this.getCallout();callout.textContent=text;callout.classList.add(dot.newsreader.ui.URLCopyButton.CSS.ACTIVE_CLASS);this.maintainPosition();};dot.newsreader.ui.URLCopyButton.prototype.onClickHandler=function(e){e.preventDefault();this.select();var copied=this.copy();this.deselect();var text=copied?dot.newsreader.ui.URLCopyButton.Labels.COPIED:dot.newsreader.ui.URLCopyButton.Labels.ERROR;this.showMessage(text);this.startHideMessageTimer();};dot.newsreader.ui.URLCopyButton.prototype.onMouseEnterHandler=function(e){this.showMessage(dot.newsreader.ui.URLCopyButton.Labels.HOVER);};dot.newsreader.ui.URLCopyButton.prototype.onMouseLeaveHandler=function(e){this.hideCallout();};dot.newsreader.ui.URLCopyButton.prototype.maintainPosition=function(){var callout=this.getCallout();var bounds=this.element.getBoundingClientRect();var elementHeight=bounds.height<90?(bounds.height-10):(bounds.height-30);callout.style.top=bounds.top+window.pageYOffset+elementHeight+'px';callout.style.left=bounds.left+window.pageXOffset+(this.element.offsetWidth+50)/2-callout.offsetWidth/2+'px';};;dot.provide('dot.newsreader.ui');dot.newsreader.ui.SocialTracker=dot.utils.oop.extend(dot.events.EventTarget,function(){dot.events.EventTarget.call(this);});dot.utils.oop.singleton(dot.newsreader.ui.SocialTracker);dot.newsreader.ui.SocialTracker.prototype.addTrackingHandlers=function(content){var container=content.closest('.article-page');var buttons=container.querySelectorAll('.dd-button-share-facebook, .dd-button-share-twitter');for(var i=0,x=buttons.length;i<x;i++){var button=buttons[i];button.addEventListener('click',function(){ga('send','event','button','click','id',this.id);});}};dot.newsreader.ui.SocialTracker.prototype.handleFacebookShareButtons=function(content){var container=content.closest('.article-page');var buttons=container.querySelectorAll('.dd-button-share-facebook');for(var i=0,x=buttons.length;i<x;i++){var shareButton=buttons[i];shareButton.addEventListener('click',function(evt){evt.preventDefault();var url=event.currentTarget.getAttribute("data-url");if(url){FB.ui({method:'share',href:url});}});}};dot.newsreader.ui.SocialTracker.prototype.trackOutboundLinks=function(content){var pattern=/^https?:\/\/(www\.)?dailydot.com/;var links=content.getElementsByTagName('a');Array.from(links).filter(function(link){if(link.parentElement.classList.contains('dd-share-button-row')||link.parentElement.classList.contains('dd-follow-button-row')){return false;}
var href=link.getAttribute('href');return href&&(href.indexOf('http')===0)&&!pattern.test(href);}).forEach(function(link){link.addEventListener('click',function(e){e.preventDefault();var url=this.getAttribute('href');ga('send','event','outbound','click',url,{'hitCallback':function(){document.location=url;}});});})};;dot.provide('dot.newsreader.ads.StackcommerceEmail');dot.newsreader.ads.StackcommerceEmail=function(){this.assignSubmitListener();this.assignFormInputListener();};dot.newsreader.ads.StackcommerceEmail.CONFIRMATION_ACTIVE_CLASS='dd-active';dot.newsreader.ads.StackcommerceEmail.STACKCOMMERCE_API_TOKEN="a670775c-dc46-4995-b205-634dfdf293fc";dot.newsreader.ads.StackcommerceEmail.STACKCOMMERCE_PUB_ID=164;dot.newsreader.ads.StackcommerceEmail.prototype.form=document.getElementById('dd-stackcommerce-email-subscribe-form');dot.newsreader.ads.StackcommerceEmail.prototype.input=document.getElementById('dd-stackcommerce-email-subscribe-text');dot.newsreader.ads.StackcommerceEmail.prototype.submit=document.getElementById('dd-stackcommerce-email-subscribe-button');dot.newsreader.ads.StackcommerceEmail.prototype.confirmation=document.getElementById('dd-stackcommerce-email-subscribe-confirmation');dot.newsreader.ads.StackcommerceEmail.prototype.assignFormInputListener=function(){var self=this;this.input.addEventListener('input',function(){if(dot.utils.net.EMAIL_REGEX.test(self.input.value)){self.submit.removeAttribute('disabled');}else{self.submit.setAttribute('disabled','disabled');}
self.confirmation.classList.remove(dot.newsreader.ads.StackcommerceEmail.CONFIRMATION_ACTIVE_CLASS);});};dot.newsreader.ads.StackcommerceEmail.prototype.assignSubmitListener=function(){var self=this;this.form.addEventListener('submit',function(e){e.preventDefault();self.submit.setAttribute('disabled','disabled');var emailString='"'+self.input.value.trim()+'"';var apiTokenString='"'+dot.newsreader.ads.StackcommerceEmail.STACKCOMMERCE_API_TOKEN+'"';var request="{"+'"email":'+emailString+',"api_token":'+apiTokenString+"}";console.log('request',request);var xhr=new XMLHttpRequest();xhr.addEventListener('load',confirm);xhr.open('POST','https://api.stacksocial.com/v0/subscribers');xhr.setRequestHeader('Content-type','application/json');xhr.send(request);return false;});};dot.newsreader.ads.StackcommerceEmail.prototype.confirm=function(){if(this.responseText=='ok'){this.confirmation.classList.add(dot.newsreader.ads.StackcommerceEmail.CONFIRMATION_ACTIVE_CLASS);ga('send','event','button','click','stackcommerce-email');}};;dot.provide('dot.newsreader.content');dot.newsreader.content.InfiniteScroll=dot.utils.oop.extend(dot.events.EventTarget,function(container){dot.events.EventTarget.call(this);this.container=container;this.wells=container.getElementsByClassName('dd-well');this.onLayoutUpdateHandler=this.onLayoutUpdateHandler.bind(this);this.onDataLoaded=this.onDataLoaded.bind(this);this.onResponseError=this.onResponseError.bind(this);this.onEagerInteraction=this.onEagerInteraction.bind(this);this.prefetch=[];this.setupEagerLoad();this.start();});dot.newsreader.content.InfiniteScroll.EventType={RENDERED:'dot.newsreader.content.InfiniteScroll.RENDERED',REQUESTED:'dot.newsreader.content.InfiniteScroll.REQUESTED'};dot.newsreader.content.InfiniteScroll.HOME_COMPONENT='/';dot.newsreader.content.InfiniteScroll.SUPPORTED_COMPONENTS=['topics','authors','tags','communities','wells','latest','pages'];dot.newsreader.content.InfiniteScroll.CONTENT_COMPONENT='content_loader';dot.newsreader.content.InfiniteScroll.ACCEPTABLE_FAILURES=3;dot.newsreader.content.InfiniteScroll.prototype.prefetch=[];dot.newsreader.content.InfiniteScroll.prototype.verticalOffset=0;dot.newsreader.content.InfiniteScroll.prototype.container=null;dot.newsreader.content.InfiniteScroll.prototype.wells=null;dot.newsreader.content.InfiniteScroll.prototype.lastMeasurement=Infinity;dot.newsreader.content.InfiniteScroll.prototype.contentChangedAfterLastRender=true;dot.newsreader.content.InfiniteScroll.prototype.spinner=null;dot.newsreader.content.InfiniteScroll.prototype.errorCount=0;dot.newsreader.content.InfiniteScroll.prototype.hasSuccessfullyRenderedRemoteContent=false;dot.newsreader.content.InfiniteScroll.prototype.requestQuantityOffset=0;dot.newsreader.content.InfiniteScroll.prototype.requestQuantity=1;dot.newsreader.content.InfiniteScroll.prototype.requestIndex=0;dot.newsreader.content.InfiniteScroll.prototype.isLoading=false;dot.newsreader.content.InfiniteScroll.prototype.isListening=false;dot.newsreader.content.InfiniteScroll.prototype.hasMetaBeenPopulated=false;dot.newsreader.content.InfiniteScroll.prototype.baseUrl=dot.newsreader.content.InfiniteScroll.HOME_COMPONENT;dot.newsreader.content.InfiniteScroll.prototype.isOnHome=false;dot.newsreader.content.InfiniteScroll.prototype.hasPrefetch=function(){return this.prefetch.length>0;};dot.newsreader.content.InfiniteScroll.prototype.getRequestQuantityOffset=function(){return this.requestQuantityOffset;};dot.newsreader.content.InfiniteScroll.prototype.getComputedRequestQuantityOffset=function(){return this.hasSuccessfullyRenderedRemoteContent?0:this.requestQuantityOffset;};dot.newsreader.content.InfiniteScroll.prototype.setRequestQuantityOffset=function(offset){this.requestQuantityOffset=offset;};dot.newsreader.content.InfiniteScroll.prototype.getRequestQuantity=function(){return this.requestQuantity;};dot.newsreader.content.InfiniteScroll.prototype.setRequestQuantity=function(quantity){this.requestQuantity=quantity;};dot.newsreader.content.InfiniteScroll.prototype.getComputedRequestQuantity=function(){return this.getRequestQuantity()-this.getComputedRequestQuantityOffset();};dot.newsreader.content.InfiniteScroll.prototype.getRequestIndex=function(){return this.requestIndex;};dot.newsreader.content.InfiniteScroll.prototype.setRequestIndex=function(index){this.requestIndex=index;};dot.newsreader.content.InfiniteScroll.prototype.getVerticalOffset=function(){return this.verticalOffset;};dot.newsreader.content.InfiniteScroll.prototype.setVerticalOffset=function(offset){this.verticalOffset=offset;};dot.newsreader.content.InfiniteScroll.prototype.determineContentChange=function(){var measurement=this.container.clientHeight;this.contentChangedAfterLastRender=this.lastMeasurement!=measurement;this.lastMeasurement=measurement;};dot.newsreader.content.InfiniteScroll.prototype.onDataLoaded=function(event){this.setIsLoading(false);if(event.target.status<200||event.target.status>=300){this.registerError();return;}
var data;try{data=JSON.parse(event.target.responseText);}catch(e){this.registerError();return;}
if(data){this.errorCount=0;this.requestIndex=data.next;this.hasSuccessfullyRenderedRemoteContent=true;this.populate(data.html);this.showMoreContentIfRequired();}else{this.registerError();}};dot.newsreader.content.InfiniteScroll.prototype.populate=function(list){var index=this.getComputedRequestQuantity();this.prefetch.push(list.slice(0,index).join(''));this.prefetch.push(list.slice(index).join(''));};dot.newsreader.content.InfiniteScroll.prototype.renderPrefetch=function(){if(this.hasPrefetch()){this.appendHTML(this.prefetch.shift());this.broadcastRenderComplete();this.determineContentChange();this.showMoreContentIfRequired();}};dot.newsreader.content.InfiniteScroll.prototype.onResponseError=function(e){this.setIsLoading(false);this.registerError();};dot.newsreader.content.InfiniteScroll.prototype.appendHTML=function(html){var fragment=dot.utils.dom.htmlToFragment(html);this.container.appendChild(fragment);};dot.newsreader.content.InfiniteScroll.prototype.start=function(){if(!this.isListening){window.addEventListener('scroll',this.onLayoutUpdateHandler);window.addEventListener('resize',this.onLayoutUpdateHandler);this.isListening=true;}};dot.newsreader.content.InfiniteScroll.prototype.stop=function(){if(this.isListening){window.removeEventListener('scroll',this.onLayoutUpdateHandler);window.removeEventListener('resize',this.onLayoutUpdateHandler);this.isListening=false;}};dot.newsreader.content.InfiniteScroll.prototype.registerError=function(){this.errorCount++;if(this.errorCount>dot.newsreader.content.InfiniteScroll.ACCEPTABLE_FAILURES){this.stop();}};dot.newsreader.content.InfiniteScroll.prototype.populateMetaFromUrl=function(){if(!this.hasMetaBeenPopulated){var pathName=location.pathname;var pathParts=pathName.split('/');var firstComponent=pathParts[1];this.isOnHome=dot.newsreader.content.InfiniteScroll.SUPPORTED_COMPONENTS.indexOf(firstComponent)==-1;if(!this.isOnHome){this.baseUrl=pathName;}
this.hasMetaBeenPopulated=true;}};dot.newsreader.content.InfiniteScroll.prototype.getIsOnHome=function(){this.populateMetaFromUrl();return this.isOnHome;};dot.newsreader.content.InfiniteScroll.prototype.getBaseUrl=function(){this.populateMetaFromUrl();return this.baseUrl;};dot.newsreader.content.InfiniteScroll.prototype.getContentUrl=function(){return this.getBaseUrl()+dot.newsreader.content.InfiniteScroll.CONTENT_COMPONENT;};dot.newsreader.content.InfiniteScroll.prototype.getRequestParameters=function(){var data={index:this.requestIndex,quantity:this.getComputedRequestQuantity()*2,format:'html'};return dot.utils.net.serialize(data);};dot.newsreader.content.InfiniteScroll.prototype.getRequestUrl=function(){return this.getContentUrl()+'/?'+this.getRequestParameters();};dot.newsreader.content.InfiniteScroll.prototype.getLastWell=function(){return this.wells[this.wells.length-1];};dot.newsreader.content.InfiniteScroll.prototype.getVirtualViewportHeight=function(){return window.innerHeight+this.verticalOffset;};dot.newsreader.content.InfiniteScroll.prototype.isLastWellVisible=function(){var well=this.getLastWell();return well&&(well.clientHeight>0)&&(well.getBoundingClientRect().top<this.getVirtualViewportHeight());};dot.newsreader.content.InfiniteScroll.prototype.fetch=function(){if(!this.isLoading){this.setIsLoading(true);this.loadContent();this.broadcastRequestInitiated();}};dot.newsreader.content.InfiniteScroll.prototype.broadcastRenderComplete=function(){var event=new CustomEvent(dot.newsreader.content.InfiniteScroll.EventType.RENDERED);this.dispatchEvent(event);};dot.newsreader.content.InfiniteScroll.prototype.broadcastRequestInitiated=function(){var event=new CustomEvent(dot.newsreader.content.InfiniteScroll.EventType.REQUESTED);this.dispatchEvent(event);};dot.newsreader.content.InfiniteScroll.prototype.loadContent=function(){var xhr=new XMLHttpRequest();xhr.addEventListener('load',this.onDataLoaded);xhr.addEventListener('error',this.onResponseError);xhr.open('GET',this.getRequestUrl());xhr.send(null);};dot.newsreader.content.InfiniteScroll.prototype.isMoreContentRequired=function(){return this.contentChangedAfterLastRender&&this.isLastWellVisible()};dot.newsreader.content.InfiniteScroll.prototype.showMoreContentIfRequired=function(){if(this.isMoreContentRequired()){this.renderPrefetch();if(!this.hasPrefetch()){this.fetch();}}};dot.newsreader.content.InfiniteScroll.prototype.onLayoutUpdateHandler=function(e){this.showMoreContentIfRequired();};dot.newsreader.content.InfiniteScroll.prototype.setIsLoading=function(loading){this.isLoading=loading;this.updateVisualLoadState();};dot.newsreader.content.InfiniteScroll.prototype.updateVisualLoadState=function(){this.getSpinner().style.display=this.isLoading?'block':'none';};dot.newsreader.content.InfiniteScroll.prototype.getSpinner=function(){if(this.spinner==null){this.spinner=document.createElement('div');this.spinner.className='dd-scroll-spinner';this.container.parentNode.insertBefore(this.spinner,this.container.nextSibling);this.updateVisualLoadState();}
return this.spinner;};dot.newsreader.content.InfiniteScroll.prototype.onEagerInteraction=function(){this.fetch();this.teardownEagerLoad();};dot.newsreader.content.InfiniteScroll.prototype.setupEagerLoad=function(){window.addEventListener('scroll',this.onEagerInteraction);window.addEventListener('resize',this.onEagerInteraction);};dot.newsreader.content.InfiniteScroll.prototype.teardownEagerLoad=function(){window.removeEventListener('scroll',this.onEagerInteraction);window.removeEventListener('resize',this.onEagerInteraction);};;dot.provide('dot.newsreader.content');dot.newsreader.content.ArticleTracker=dot.utils.oop.extend(dot.events.EventTarget,function(){dot.events.EventTarget.call(this);});dot.utils.oop.singleton(dot.newsreader.content.ArticleTracker);dot.newsreader.content.ArticleTracker.prototype.layoutManager=undefined;dot.newsreader.content.ArticleTracker.prototype.calculateProgress=function(content){return[content,-(content.getBoundingClientRect().top-window.innerHeight)/content.offsetHeight];};dot.newsreader.content.ArticleTracker.prototype.progressFactory=function(content,progress){var that=this;return function(){var results=that.calculateProgress(content);if(results[1]>=progress){var articleBody=results[0].closest('.dd-content-body-wrapper');var permalinkURL=articleBody.getAttribute('data-permalink');ga('send','event','ReadArticle',Math.round(progress*100)+'%',permalinkURL,Math.round(performance.now()));that.layoutManager.removeLayoutUpdateListener(arguments.callee);}}};dot.newsreader.content.ArticleTracker.prototype.init=function(content){this.layoutManager=dot.widgets.LayoutManager.getInstance();this.layoutManager.addLayoutUpdateListener(this.progressFactory(content,0.25));this.layoutManager.addLayoutUpdateListener(this.progressFactory(content,0.50));this.layoutManager.addLayoutUpdateListener(this.progressFactory(content,1.00));};;dot.provide('dot.newsreader.content');dot.newsreader.content.ContinuousLoader=dot.utils.oop.extend(dot.events.EventTarget,function(){dot.events.EventTarget.call(this);this.layoutManager=dot.widgets.LayoutManager.getInstance();});dot.newsreader.content.ContinuousLoader.prototype.layoutManager=undefined;dot.newsreader.content.ContinuousLoader.prototype.contentURLs=[];dot.newsreader.content.ContinuousLoader.prototype.setContentURLs=function(urls){this.contentURLs=urls;};dot.newsreader.content.ContinuousLoader.prototype.calculateProgress=function(content){return[content,-(content.getBoundingClientRect().top-window.innerHeight)/content.offsetHeight];};dot.newsreader.content.ContinuousLoader.prototype.calculateVisibleArticle=function(){var articleBodies=document.querySelectorAll('.dd-article-body .dd-content-body-wrapper');var winner=undefined;var height=window.innerHeight;var halfScreen=height/2;for(var i=0,x=articleBodies.length;i<x;i++){var articleBody=articleBodies[i];var boundingRect=articleBody.getBoundingClientRect();if((halfScreen<=boundingRect.top&&boundingRect.top<=height)||(halfScreen<=boundingRect.bottom&&boundingRect.bottom<=height)){winner=articleBody;}}
if(!winner&&document.body.scrollTop==0){winner=articleBodies[0];}
return winner;};dot.newsreader.content.ContinuousLoader.prototype.loaderFactory=function(content,progress,handler){var that=this;return function(){var results=that.calculateProgress(content);if(results[1]>=progress){that.layoutManager.removeLayoutUpdateListener(arguments.callee);var articleBody=results[0].closest('.dd-content-body-wrapper');var nextArticleURL=that.contentURLs.shift();if(nextArticleURL){dot.utils.net.xhr("/ajax"+nextArticleURL,handler);}}}};dot.newsreader.content.ContinuousLoader.prototype.updateNavAndLocation=function(){var that=this;return function(){var articleBody=that.calculateVisibleArticle();if(articleBody){var url=articleBody.getAttribute('data-permalink');if(url){var url=document.location.origin+url;if(url!=document.location.href){var navHeadline=document.getElementById('dd-nav-downward-headline');var article=articleBody.closest('.dd-article-container');var headline=article.querySelector('h1.dd-article-headline').innerHTML;history.replaceState({},headline,url);document.title=navHeadline.innerHTML=headline;}}}}};dot.newsreader.content.ContinuousLoader.prototype.setupLoader=function(content,handler){this.layoutManager.addLayoutUpdateListener(this.loaderFactory(content,0.90,handler));}
dot.newsreader.content.ContinuousLoader.prototype.setupUpdater=function(content,handler){this.layoutManager.addLayoutUpdateListener(this.updateNavAndLocation());};;dot.provide('dot.newsreader.ads');dot.newsreader.ads.AdSlot=function(adService,placement){this.adService=adService;this.placementClass=placement||'';};dot.newsreader.ads.AdSlot.prototype.adSizes=null;dot.newsreader.ads.AdSlot.prototype.dfpAdSlot=null;dot.newsreader.ads.AdSlot.prototype.element=null;dot.newsreader.ads.AdSlot.prototype.decorate=function(element){this.element=element;var placement=this.findElementPlacement(element);if(!this.element.id){var id='dd-ad-slot-element-'+Date.now()+'-'+Math.random();id=id.replace(/[^\w-]/g,'');element.id=id;}
this.setDfpAdSlot(this.defineSlot(placement,id));};dot.newsreader.ads.AdSlot.prototype.setDfpAdSlot=function(dfpAdSlot){this.dfpAdSlot=dfpAdSlot;};dot.newsreader.ads.AdSlot.prototype.getDfpAdSlot=function(){return this.dfpAdSlot;};dot.newsreader.ads.AdSlot.prototype.getDivId=function(){return this.element.id;};dot.newsreader.ads.AdSlot.prototype.findElementPlacement=function(element){var className=element.className||'';var classNames=className.split(/\s+/);for(var i=0;i<classNames.length;i++){var name=classNames[i];if(this.canUsePlacement(name)){return name;}}
return'';};dot.newsreader.ads.AdSlot.prototype.canUsePlacement=function(placement){return this.adService.hasPlacement(placement)&&this.getAdSizes(placement).length>0;};dot.newsreader.ads.AdSlot.prototype.getAdSizes=function(placement){var adPlacement=this.adService.getPlacement(placement);var adSizeRanges=adPlacement.adSizeRanges;var sizes=[],size;for(var i=0;i<adSizeRanges.length;i++){var adSizeRange=adSizeRanges[i];var windowWidth=window.innerWidth;if(windowWidth>=adSizeRange.startWidth&&windowWidth<adSizeRange.endWidth){for(var j=0;j<adSizeRange.sizes.length;j++){size=adSizeRange.sizes[j];sizes.push(size.width+'x'+size.height);}}}
sizes=dot.utils.arrays.unique(sizes);var adSizes=[];for(i=0;i<sizes.length;i++){size=sizes[i];var parts=size.split('x');adSizes.push([parseInt(parts[0],10),parseInt(parts[1],10)]);}
return adSizes;};dot.newsreader.ads.AdSlot.prototype.defineSlot=function(placement,id){this.adService.setAdLocation(id,placement);this.adService.setAdTiming(id,new Date().getTime());return this.adService.defineSlot(placement,this.getAdSizes(placement),id);};;dot.provide('dot.newsreader.ads');dot.newsreader.ads.AdService=function(){var that=this;this.dfpAdUnit=[];this.passbacks={};this.placements={};this.targeting={};this.adSlots={};this.adTimings={};this.adLocations={};this.discover=this.discover.bind(this);if(googletag&&!googletag.apiReady){googletag.pubads().disableInitialLoad();googletag.pubads().enableSingleRequest();googletag.pubads().collapseEmptyDivs();googletag.enableServices();}
googletag.pubads().addEventListener('slotRenderEnded',function(event){that.hideEmptyAdElements(event);var slotElementId=event.slot.getSlotElementId();var timing=that.getAdTiming(slotElementId);if(timing){timing=new Date().getTime()-timing;}
var location=that.getAdLocation(slotElementId);if(timing&&location){ga('send','event','AdTiming',location,event.lineItemId,timing);}});};dot.newsreader.ads.AdService.prototype.passbacks=null;dot.utils.oop.singleton(dot.newsreader.ads.AdService);dot.newsreader.ads.AdService.prototype.slugNames=null;dot.newsreader.ads.AdService.prototype.getSlugNames=function(){if(this.slugNames==null){this.slugNames=dot.application.data.adData.placements.map(function(element){return element.slug;});}
return this.slugNames;};dot.newsreader.ads.AdService.prototype.adTimings=null;dot.newsreader.ads.AdService.prototype.adLocations=null;dot.newsreader.ads.AdService.prototype.setAdTiming=function(id,value){this.adTimings[id]=value;};dot.newsreader.ads.AdService.prototype.getAdTiming=function(id){return this.adTimings[id]||undefined;};dot.newsreader.ads.AdService.prototype.setAdLocation=function(id,value){this.adLocations[id]=value;};dot.newsreader.ads.AdService.prototype.getAdLocation=function(id){return this.adLocations[id]||undefined;};dot.newsreader.ads.AdService.prototype.getSlugNameFromElement=function(element){var names=element.className.split(/\s+/);var slugs=this.getSlugNames();for(var i=0,l=names.length;i<l;i++){var name=names[i];if(slugs.indexOf(name)>-1){return name;}}
return null;};dot.newsreader.ads.AdService.prototype.discover=function(container){var initialLoadAdSlots=[];var elements=this.findElements(container);for(var i=0;i<elements.length;i++){var element=elements[i];var adSlot=new dot.newsreader.ads.AdSlot(this);try{adSlot.decorate(element);this.adSlots[adSlot.getDivId()]=adSlot;googletag.display(adSlot.getDivId());initialLoadAdSlots.push(adSlot.getDfpAdSlot());try{TN8.SmartWrapper.attachSlot(this.getSlugNameFromElement(element),adSlot.getDfpAdSlot());}catch(error){}}catch(error){}}
googletag.pubads().refresh(initialLoadAdSlots,{changeCorrelator:false});};dot.newsreader.ads.AdService.prototype.findElements=function(container){container=container||document.body;var placements=JSON.parse(JSON.stringify(this.placements));var adElements=[];var key,placement,elements,element,i,l;if(this.masterSlot!=null){for(key in placements){if(placements.hasOwnProperty(key)){placement=placements[key];if(this.masterSlot==placement.slug){elements=container.getElementsByClassName(placement.slug);for(i=0,l=elements.length;i<l;i++){element=elements[i];adElements.push(element);}
delete placements[key];break;}}}}
for(key in placements){if(placements.hasOwnProperty(key)){placement=placements[key];elements=container.getElementsByClassName(placement.slug);for(i=0,l=elements.length;i<l;i++){element=elements[i];adElements.push(element);}}}
adElements=dot.utils.arrays.unique(adElements);return adElements;};dot.newsreader.ads.AdService.prototype.validateConfig=function(config){config=config||{};config.placements=config.placements||[];config.dfpAccount=config.dfpAccount||{};config.targeting=config.targeting||{};config.masterSlot=config.masterSlot||'';return config};dot.newsreader.ads.AdService.prototype.configure=function(adDataConfig){adDataConfig=this.validateConfig(adDataConfig);this.addPlacements(adDataConfig.placements);this.setTargeting(adDataConfig.dfpAccount,adDataConfig.targeting);this.masterSlot=adDataConfig.masterSlot||null;};dot.newsreader.ads.AdService.prototype.addPlacements=function(adPlacements){for(var i=0;i<adPlacements.length;i++){var adPlacement=adPlacements[i];this.placements[adPlacement.slug]=adPlacement;}};dot.newsreader.ads.AdService.prototype.setTargeting=function(dfpAccount,targetings){this.dfpAdUnit=[dfpAccount.account,dfpAccount.network];if(dfpAccount.sitename){this.dfpAdUnit.push(dfpAccount.sitename);}
if(dfpAccount.section){this.dfpAdUnit.push(dfpAccount.section);}
this.targeting=targetings;for(var key in targetings){if(targetings.hasOwnProperty(key)){var value=targetings[key];googletag.pubads().setTargeting(key,value);}}
try{amznads.setTargetingForGPTAsync('amznslots');}catch(e){}};dot.newsreader.ads.AdService.prototype.hasPlacement=function(key){return key in this.placements;};dot.newsreader.ads.AdService.prototype.getPlacement=function(key){return this.placements[key];};dot.newsreader.ads.AdService.prototype.getDfpUnitName=function(){return'/'+this.dfpAdUnit.join('/');};dot.newsreader.ads.AdService.prototype.defineSlot=function(placement,sizes,id){var adSlot=googletag.defineSlot(this.getDfpUnitName(),sizes,id).addService(googletag.pubads()).setTargeting('placement',placement).setTargeting('passback','none');var adTargetings=this.placements[placement].adTargetings;for(var i=0;i<adTargetings.length;i++){var adTargeting=adTargetings[i];adSlot.setTargeting(adTargeting.tKey,adTargeting.tValue);}
return adSlot;};dot.newsreader.ads.AdService.prototype.passback=function(iframeName,passback){var container=document.getElementById(iframeName+'__container__');var iframeParent=container.parentNode;var id=iframeParent.id;var dfpAdSlot=this.adSlots[id].getDfpAdSlot();googletag.enableServices();if(!this.passbacks.hasOwnProperty(iframeName)){this.passbacks[iframeName]=[];}
this.passbacks[iframeName].push(passback);dfpAdSlot.setTargeting('passback',this.passbacks[iframeName]);googletag.pubads().refresh([dfpAdSlot],{changeCorrelator:false,sw_reuse_bids:true});};dot.newsreader.ads.AdService.prototype.resetTargetingAndDiscover=function(adElement){try{var discover=this.discover;amznads.getAdsCallback(dot.application.data.a9.account,function(){amznads.setTargetingForGPTAsync('amznslots');discover(adElement.parentNode);});}catch(e){this.discover(adElement.parentNode);}};dot.newsreader.ads.AdService.prototype.hideEmptyAdElements=function(event){var isEmpty=event.isEmpty||!event.size||(event.size[0]<=1||event.size[1]<=1);var id=event.slot.getSlotElementId();var element=document.getElementById(id);if(element.classList.contains('inline')){return;}
if(element!=null){var parent=element.parentElement;if(parent!=null&&parent.classList.contains('dd-ad')){parent.style.display=isEmpty?'none':'block';}}};;dot.provide('dot.newsreader.ads');dot.newsreader.ads.ArticleAdManager=dot.utils.oop.extend(dot.events.EventTarget,function(){dot.events.EventTarget.call(this);});dot.utils.oop.singleton(dot.newsreader.ads.ArticleAdManager);dot.newsreader.ads.ArticleAdManager.EventType={AD_INSERTED:'adInserted'};dot.newsreader.ads.ArticleAdManager.Config={LAZY_LOAD_DISTANCE_THRESHOLD:300,LAZY_LOAD_CSS_CLASS:'dd-ad-pending'};dot.newsreader.ads.ArticleAdManager.TAG='dot.newsreader.ads.ArticleAdManager';dot.newsreader.ads.ArticleAdManager.DISQUALIFY_TAGS_FOR_AD_INSERTION=['h1','h2','h3','h4','h5','h6'];dot.newsreader.ads.ArticleAdManager.prototype.pendingAds=null;dot.newsreader.ads.ArticleAdManager.prototype.isListening=false;dot.newsreader.ads.ArticleAdManager.prototype.minimumDistanceMultiplier=1;dot.newsreader.ads.ArticleAdManager.prototype.setMinimumDistanceMultiplier=function(multiplier){this.minimumDistanceMultiplier=multiplier;};dot.newsreader.ads.ArticleAdManager.prototype.minimumDistanceOffset=0;dot.newsreader.ads.ArticleAdManager.prototype.setMinimumDistanceOffset=function(offset){this.minimumDistanceOffset=offset;};dot.newsreader.ads.ArticleAdManager.prototype.viewportHeight=0;dot.newsreader.ads.ArticleAdManager.prototype.setViewportHeight=function(viewportHeight){this.viewportHeight=viewportHeight;};dot.newsreader.ads.ArticleAdManager.prototype.minimumWordsBeforeFirstAd=0;dot.newsreader.ads.ArticleAdManager.prototype.setMinimumWordsBeforeFirstAd=function(count){this.minimumWordsBeforeFirstAd=count;};dot.newsreader.ads.ArticleAdManager.prototype.initialAdsAttributes=[];dot.newsreader.ads.ArticleAdManager.prototype.setInitialAdsAttributes=function(attributes){this.initialAdsAttributes=attributes;};dot.newsreader.ads.ArticleAdManager.prototype.subsequentAdAttributes=null;dot.newsreader.ads.ArticleAdManager.prototype.setSubsquentAdAttributes=function(attributes){this.subsequentAdAttributes=attributes;};dot.newsreader.ads.ArticleAdManager.prototype.outOfPageAdEnabled=false;dot.newsreader.ads.ArticleAdManager.prototype.setOutOfPageAdEnabled=function(enabled){this.outOfPageAdEnabled=enabled;};dot.newsreader.ads.ArticleAdManager.prototype.getFirstQualifiedNode=function(element){var count=0;var child=element.firstChild;while(child!=null){if(this.disqualifyElement(child)){child=child.nextSibling;continue;}
var words=child.textContent.match(/\w+/g);if(words!=null&&words.length){count+=words.length;if(count>=this.minimumWordsBeforeFirstAd){while(this.isNodeProhibitedOrInProhibitedAncestor(child,element)){child=child.nextSibling;}
break;}}
child=child.nextSibling;}
return child;};dot.newsreader.ads.ArticleAdManager.prototype.nodeHasDisqualifyingNodeName=function(node){var tagName=node.nodeName.toLowerCase();var index=dot.newsreader.ads.ArticleAdManager.DISQUALIFY_TAGS_FOR_AD_INSERTION.indexOf(tagName);return index>-1;};dot.newsreader.ads.ArticleAdManager.prototype.isNodeProhibitedOrInProhibitedAncestor=function(node,stop){while(node!=null&&node!=stop){if(this.nodeHasDisqualifyingNodeName(node)){return true;}
node=node.parentNode;}
return false;};dot.newsreader.ads.ArticleAdManager.prototype.isBlockNode=function(node){return node&&node.nodeType==1&&window.getComputedStyle(node,null).getPropertyValue('display')=='block';};dot.newsreader.ads.ArticleAdManager.prototype.isInlineOrTextNode=function(node){return node&&(node.nodeType!=1||(node.nodeType==1&&window.getComputedStyle(node,null).getPropertyValue('display')=='inline'));};dot.newsreader.ads.ArticleAdManager.prototype.isNodeNullOrEmpty=function(node){return!node||!node.hasChildNodes();};dot.newsreader.ads.ArticleAdManager.prototype.isNodeNullOrEmptyOrOnlyWhitespace=function(node){return this.isNodeNullOrEmpty(node)||node.textContent.trim().length==0;};dot.newsreader.ads.ArticleAdManager.prototype.isPhraseNodeWithContent=function(node){if(node.nodeType==1){var inline=window.getComputedStyle(node,null).getPropertyValue('display')=='inline';if(!inline){return false;}}
return node.textContent.trim().length>0;};dot.newsreader.ads.ArticleAdManager.prototype.encloseInlineAndTextNodeChildrenInParagraphs=function(element){var current=element.firstChild;while(current!=null){if(this.isPhraseNodeWithContent(current)){var paragraph=document.createElement('p');element.insertBefore(paragraph,current);while(this.isInlineOrTextNode(current)){var next=current.nextSibling;paragraph.appendChild(current);current=next;}
if(current==null){return;}}
current=current.nextSibling;}};dot.newsreader.ads.ArticleAdManager.prototype.overlaps=function(original,compare){if((original.bottom-original.top)==0){return false;}
if((compare.bottom-compare.top)==0){return false;}
return!(original.right<compare.left||original.left>compare.right||original.bottom<compare.top||original.top>compare.bottom);};dot.newsreader.ads.ArticleAdManager.prototype.overlapsSiblings=function(element){var original=element.getBoundingClientRect();var current=element.previousElementSibling;var compare;while(current!=null){compare=current.getBoundingClientRect();if(this.overlaps(original,compare)){return true;}
current=current.previousElementSibling;}
current=element.nextElementSibling;while(current!=null){compare=current.getBoundingClientRect();if(this.overlaps(original,compare)){return true;}
current=current.nextElementSibling;}
return false;};dot.newsreader.ads.ArticleAdManager.prototype.getNextAdFollowingElement=function(anchor){var cursor=anchor.nextElementSibling;while(cursor!=null){if(cursor.hasAttribute('data-tag')&&(cursor.getAttribute('data-tag')==dot.newsreader.ads.ArticleAdManager.TAG)){return cursor;}
cursor=cursor.nextElementSibling;}
return null;};dot.newsreader.ads.ArticleAdManager.prototype.getMinimumDistanceBetweenAds=function(){return this.minimumDistanceOffset+(this.minimumDistanceMultiplier*this.viewportHeight);};dot.newsreader.ads.ArticleAdManager.prototype.disqualifyBySize=function(element){var bounds=element.getBoundingClientRect();return((bounds.bottom-bounds.top)==0);};dot.newsreader.ads.ArticleAdManager.prototype.disqualifyByOverlap=function(element){return this.overlapsSiblings(element);};dot.newsreader.ads.ArticleAdManager.prototype.disqualifyByTagName=function(element){return this.nodeHasDisqualifyingNodeName(element);};dot.newsreader.ads.ArticleAdManager.prototype.disqualifyElement=function(element){return this.disqualifyBySize(element)||this.disqualifyByTagName(element)||this.disqualifyByOverlap(element);};dot.newsreader.ads.ArticleAdManager.prototype.getNextQualifiedElement=function(ad,minimumDistance){var minimum=ad.offsetTop+ad.offsetHeight+minimumDistance;var current=ad.nextElementSibling;while(current!=null){if((current.offsetTop+current.offsetHeight)>=minimum){while(current!=null&&this.disqualifyElement(current)){current=current.nextElementSibling;}
return current;}
current=current.nextElementSibling;}
return null;};dot.newsreader.ads.ArticleAdManager.prototype.applyAttributes=function(element,attributes){for(var attribute in attributes){if(attributes.hasOwnProperty(attribute)){element[attribute]=attributes[attribute];}}};dot.newsreader.ads.ArticleAdManager.prototype.insertAdNear=function(anchor,properties,prependAd){var ad=document.createElement('div');ad.setAttribute('data-tag',dot.newsreader.ads.ArticleAdManager.TAG);ad.className='dd-ad dd-ad-pending dd-adplacement-'+properties.className;if(prependAd){anchor.parentNode.insertBefore(ad,anchor);}else{anchor.parentNode.insertBefore(ad,anchor.nextSibling);}
var innerAd=document.createElement('div');ad.appendChild(innerAd);return ad;};dot.newsreader.ads.ArticleAdManager.prototype.broadcastAdInsertion=function(initial,element){var event=new CustomEvent(dot.newsreader.ads.ArticleAdManager.EventType.AD_INSERTED,{detail:{isInitial:initial,adElement:element}});this.dispatchEvent(event);};dot.newsreader.ads.ArticleAdManager.prototype.performAdInsertionRoutine=function(current,properties,isFirst){var minimumDistance=this.getMinimumDistanceBetweenAds();if(properties.hasOwnProperty('minimumDistance')){minimumDistance=properties.minimumDistance;}
var inserted=this.insertAdNear(current,properties,(isFirst&&this.minimumWordsBeforeFirstAd<=0));this.applyAttributes(inserted.firstElementChild,properties);this.broadcastAdInsertion(true,inserted);return this.getNextQualifiedElement(inserted,minimumDistance);};dot.newsreader.ads.ArticleAdManager.prototype.insertAds=function(container,discoverer){this.encloseInlineAndTextNodeChildrenInParagraphs(container);var current=this.getFirstQualifiedNode(container);var isFirst=true;if(current!=null){for(var i=0,x=this.initialAdsAttributes.length;i<x&&current!=null;i++){current=this.performAdInsertionRoutine(current,this.initialAdsAttributes[i],isFirst);isFirst=false;}
while(current!=null){current=this.performAdInsertionRoutine(current,this.subsequentAdAttributes,isFirst);isFirst=false;}}
if(this.outOfPageAdEnabled){this.performAdInsertionRoutine(container.lastChild,{className:'out-of-page'},isFirst);}
this.lazyLoadAds(discoverer);};dot.newsreader.ads.ArticleAdManager.prototype.scanRenderedAds=function(){var visible=[];var top=-dot.newsreader.ads.ArticleAdManager.Config.LAZY_LOAD_DISTANCE_THRESHOLD;var bottom=window.innerHeight+dot.newsreader.ads.ArticleAdManager.Config.LAZY_LOAD_DISTANCE_THRESHOLD;var i,l,ad;var ads=this.getPendingAds();for(i=0,l=ads.length;i<l;i++){ad=ads[i];var bounds=ad.getBoundingClientRect();if(bounds.top<bottom&&bounds.bottom>top){visible.push(ad);}}
for(i=0,l=visible.length;i<l;i++){ad=visible[i];ad.classList.remove(dot.newsreader.ads.ArticleAdManager.Config.LAZY_LOAD_CSS_CLASS);this.adDiscoverer(ad);}};dot.newsreader.ads.ArticleAdManager.prototype.getPendingAds=function(){if(this.pendingAds==null){this.pendingAds=document.getElementsByClassName(dot.newsreader.ads.ArticleAdManager.Config.LAZY_LOAD_CSS_CLASS);}
return this.pendingAds;};dot.newsreader.ads.ArticleAdManager.prototype.lazyLoadAds=function(discoverer){this.adDiscoverer=discoverer;if(!this.isListening){dot.widgets.LayoutManager.getInstance().addLayoutUpdateListener(this.scanRenderedAds.bind(this));this.isListening=true;}};;dot.provide('dot.newsreader.ui.ShareBarToggle');dot.newsreader.ui.ShareBar=function(element){this.element=element;this.assignToggleButtonBehavior();};dot.newsreader.ui.ShareBar.DD_EXPANDED_CLASS='dd-expanded';dot.newsreader.ui.ShareBar.DD_TOGGLE_BUTTON_CLASS='dd-button-share-more';dot.newsreader.ui.ShareBar.prototype.expanded=false;dot.newsreader.ui.ShareBar.prototype.element=null;dot.newsreader.ui.ShareBar.prototype.manageEvent=function(event){if(event){event.preventDefault();event.stopPropagation();}
return false;};dot.newsreader.ui.ShareBar.prototype.expandShareBar=function(){this.element.classList.add(dot.newsreader.ui.ShareBar.DD_EXPANDED_CLASS);this.expanded=true;};dot.newsreader.ui.ShareBar.prototype.collapseShareBar=function(){this.element.classList.remove(dot.newsreader.ui.ShareBar.DD_EXPANDED_CLASS);this.expanded=false;};dot.newsreader.ui.ShareBar.prototype.toggleShareBar=function(e){if(this.expanded){this.collapseShareBar();}else{this.expandShareBar();}
this.manageEvent(e);};dot.newsreader.ui.ShareBar.prototype.assignToggleButtonBehavior=function(){var toggle=this.toggleShareBar.bind(this);var toggleButton=this.element.querySelector("."+dot.newsreader.ui.ShareBar.DD_TOGGLE_BUTTON_CLASS);toggleButton.addEventListener('click',toggle);};;(function(){var list=document.getElementById('dd-wells-list');if(!list){return;}
var wells=list.querySelectorAll('.dd-well');var quantity=9;var offset=wells.length;var loader=new dot.newsreader.content.InfiniteScroll(list);loader.setRequestIndex(offset);loader.setRequestQuantity(quantity);loader.setRequestQuantityOffset(offset);loader.setVerticalOffset(window.innerHeight);var dispatcher=dot.events.EventTargetProvider.getEventTarget();loader.addEventListener(dot.newsreader.content.InfiniteScroll.EventType.RENDERED,function(e){dispatcher.dispatchEvent(e);dot.widgets.LayoutManager.getInstance().trigger();});loader.showMoreContentIfRequired();})();;(function(){if(dot.application.data.facebookCustomAudienceId){var uri='https://www.facebook.com/tr?id='
+dot.application.data.facebookCustomAudienceId
+'&amp;ev=PixelInitialized&cd='
+dot.utils.net.serialize(dot.application.data.adData.targeting);var element=document.createElement('img');element.style.display='none';element.src=uri;document.body.appendChild(element);}})();;(function(){if('twttr'in window){window.twttr.ready(function(twttr){twttr.events.bind('tweet',function(event){ga('send','social','twitter','tweet',window.location.href);});});}
if('FB'in window){window.FB.Event.subscribe('edge.create',function(url){ga('send','event','button','click','follow-facebook');ga('send','social','facebook','like',url);});window.FB.Event.subscribe('edge.remove',function(url){ga('send','event','button','click','unfollow-facebook');});}
var articleBody=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(!articleBody){return;}
dot.newsreader.ui.SocialTracker.getInstance().addTrackingHandlers(articleBody);})();;(function(){var button=document.getElementById('dd-navigation-mini-search-button');var dropdown=document.getElementById('dd-navigation-mini-search-dropdown');if(!button||!dropdown){return;}
var open=dropdown.style.display=='block';button.addEventListener('click',function(){dropdown.style.display=(open=!open)?'block':'none';});})();;(function(){var nav=document.getElementById('dd-navigation-wrapper');if(!nav){return;}
var container=document.getElementById('outermost_container');if(!container){return;}
var offset=window.getComputedStyle(container,null).getPropertyValue('margin-top');offset=parseInt(offset,10);var fixed=false;dot.widgets.LayoutManager.getInstance().addLayoutUpdateListener(function(e){var shouldFix=(window.pageYOffset>offset);if(fixed!=shouldFix){nav.style.position=shouldFix?'fixed':'absolute';fixed=shouldFix;}});})();;(function(){var pending=document.getElementsByClassName('dd-pending');dot.widgets.LayoutManager.getInstance().addLayoutUpdateListener(function(){var condemned=[],node,i,l;for(i=0;i<pending.length;i++){node=pending[i];if(node.tagName.toLowerCase()=='img'){if(node.getBoundingClientRect().top<window.innerHeight){if(node.hasAttribute('data-src')){node.src=node.getAttribute('data-src');condemned.push(node);}}}}
for(i=0,l=condemned.length;i<l;i++){node=condemned[i];node.classList.remove('dd-pending');}});})();;(function(){var adservice=dot.newsreader.ads.AdService.getInstance();adservice.configure(dot.application.data.adData);adservice.discover(document.body);})();;(function(){var articleBody=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(articleBody&&articleBody.hasAttribute('data-ad-exempt')){return;}
if(articleBody&&articleBody.childElementCount==1){articleBody=articleBody.firstElementChild;}
if(!articleBody){return;}
if(document.querySelector('.dd-article-no-ads')){return;}
var adService=dot.newsreader.ads.AdService.getInstance();var adManager=dot.newsreader.ads.ArticleAdManager.getInstance();var initialAds=[{className:'inline'},{className:'mezzanine'}];if(document.documentElement.clientWidth>=720){initialAds.unshift({className:'balcony',minimumDistance:350});}
adManager.setInitialAdsAttributes(initialAds);adManager.setSubsquentAdAttributes({className:'intermission'});adManager.setMinimumWordsBeforeFirstAd(0);adManager.setMinimumDistanceMultiplier(1);adManager.setMinimumDistanceOffset(100);adManager.setOutOfPageAdEnabled(false);adManager.setViewportHeight(window.innerHeight||500);adManager.insertAds(articleBody,adService.discover);})();;(function(){var elements={navbar:document.getElementById('dd-navigation-mini'),toggler:document.getElementById('dd-navigation-close-drawer'),opener:document.getElementById('dd-navigation-mini-toggle-button'),drawer:document.getElementById('dd-sliding-drawer'),search:document.getElementById('dd-navigation-mini-search-dropdown'),content:document.getElementById('dd-main')};if(!dot.utils.objects.populated(elements)){return;}
new dot.newsreader.widgets.DrawerToggle(elements);})();;(function(){var container=document.getElementById('dd-navigation');if(!container){return;}
var menus=container.querySelectorAll('.dd-navigation-menu');var dropdowns=Array.from(menus).map(function(menu){return new dot.newsreader.ui.Dropdown(menu)});dropdowns.forEach(function(dropdown){dropdowns.forEach(function(sibling){if(sibling!=dropdown){dropdown.addSibling(sibling);}});});})();;(function(){if(document.getElementById('dd-carousel-wrapper')){if(dot.application.data.carouselItems){new dot.newsreader.ui.Carousel(dot.application.data.carouselItems);}}})();;(function(){var authors=document.getElementById('dd-article-authors');var container=document.getElementById('dd-article-author-popups');if(!authors||!container){return;}
var popups=container.getElementsByClassName('dd-authors-popup');var links=authors.getElementsByClassName('dd-article-authors-link');var helper=dot.newsreader.ui.PopupHelper.getInstance();var render=function(popup){var iframe=popup.querySelector('iframe[data-src]');if(iframe){iframe.src=iframe.getAttribute('data-src');iframe.removeAttribute('data-src');}};var hover=function(e){var index=this.getAttribute('data-index');for(var i=popups.length-1;i>=0;i--){var popup=popups[i];if(i==index){if(!popup.classList.contains('dd-open')){popup.classList.add('dd-open');helper.transitionInPopup(this,popup);render(popup);}}else{popup.classList.remove('dd-open');}}};for(var i=links.length-1;i>=0;i--){var link=links[i];link.setAttribute('data-index',i);link.addEventListener('mouseenter',hover);}
authors.addEventListener('mouseleave',function(){for(var i=popups.length-1;i>=0;i--){var popup=popups[i];popup.classList.remove('dd-open');}});})();;(function(){var loader=new dot.newsreader.ui.SatisfactionModalLoader();var show=function(e){e.preventDefault();loader.showModal();};var buttons=document.getElementsByClassName('dd-satisfaction-open-button');for(var i=0,l=buttons.length;i<l;i++){var button=buttons[i];button.addEventListener('click',show);}})();;(function(){var form=document.getElementById('dd-email-subscribe-form');if(!form){return;}
var emailRegex=dot.utils.net.EMAIL_REGEX;var input=document.getElementById('dd-email-subscribe-text');var submit=document.getElementById('dd-email-subscribe-button');input.addEventListener('input',function(){if(emailRegex.test(input.value)){submit.removeAttribute('disabled');}else{submit.setAttribute('disabled','disabled');}
document.getElementById('dd-email-subscribe-confirmation').classList.remove('dd-active');});var confirm=function(){if(this.responseText=='ok'){document.getElementById('dd-email-subscribe-confirmation').classList.add('dd-active');ga('send','event','button','click','subscribe-email');}};form.addEventListener('submit',function(e){e.preventDefault();submit.setAttribute('disabled','disabled');var email=input.value.trim();var xhr=new XMLHttpRequest();xhr.addEventListener('load',confirm);xhr.open('POST','/email/subscribe');xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');xhr.send('email='+email);return false;});})();;(function(){var form=document.getElementById('dd-dropdown-email-subscribe-form');if(!form){return;}
var emailRegex=dot.utils.net.EMAIL_REGEX;var input=document.getElementById('dd-dropdown-email-subscribe-text');var submit=document.getElementById('dd-dropdown-email-subscribe-button');input.addEventListener('input',function(){if(emailRegex.test(input.value)){submit.removeAttribute('disabled');}else{submit.setAttribute('disabled','disabled');}
document.getElementById('dd-email-subscribe-confirmation').classList.remove('dd-active');});var confirm=function(){if(this.responseText=='ok'){document.getElementById('dd-email-subscribe-confirmation').classList.add('dd-active');ga('send','event','button','click','subscribe-email');}};form.addEventListener('submit',function(e){e.preventDefault();submit.setAttribute('disabled','disabled');var email=input.value.trim();var xhr=new XMLHttpRequest();xhr.addEventListener('load',confirm);xhr.open('POST','/email/subscribe');xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');xhr.send('email='+email);return false;});})();;(function(){var wellListElement=document.getElementById('dd-wells-list');if(!wellListElement){return;}
var adDiscoverer=dot.newsreader.ads.AdService.getInstance();dot.widgets.LayoutManager.getInstance().addLayoutUpdateListener(function(){var qualified=wellListElement.querySelectorAll('div.intermission.dd-pending');for(var i=0,l=qualified.length;i<l;i++){var adElement=qualified[i];if(adElement.getBoundingClientRect().top<window.innerHeight){adElement.classList.remove('dd-pending');googletag.pubads().updateCorrelator();adDiscoverer.resetTargetingAndDiscover(adElement);}}});var renderAds=function(e){var wells=wellListElement.getElementsByClassName('dd-well');for(var i=0,l=wells.length;i<l;i++){var well=wells[i];if(well.nextElementSibling&&!well.nextElementSibling.classList.contains('dd-ad-container')){var sibling=document.createElement('div');sibling.className='dd-ad-container';sibling.innerHTML='<div class="intermission dd-pending"></div>';well.parentNode.insertBefore(sibling,well.nextSibling);}}};dot.events.EventTargetProvider.getEventTarget().addEventListener(dot.newsreader.content.InfiniteScroll.EventType.RENDERED,renderAds);renderAds(null);})();;(function(){dot.utils.net.jsloader('http://storage.cloud.kargo.com/ad/network/tag/v3/_jK-jb6WWqQ1IWgPuV8530b.js');})();;(function(){var EVENT_CLASS_MAP={'dd-button-facebook':'share-facebook','dd-button-twitter':'share-twitter','dd-button-pinterest':'share-pinterest','dd-button-reddit':'share-reddit','dd-button-tumblr':'share-tumblr','dd-button-whatsapp':'share-whatsapp','dd-button-email':'share-email'};var showMoreCount=1;document.body.addEventListener('click',function(evt){var targetClasses=evt.target.className.toString().split(" ");for(var classIndex=0;classIndex<targetClasses.length;classIndex++){var targetClass=targetClasses[classIndex];if(targetClass in EVENT_CLASS_MAP){ga('send','event','button','click',EVENT_CLASS_MAP[targetClass]);}}
if(evt.target.id=='dd-show-more-button'){ga('send','event','button','click','show-more',showMoreCount++);}});})();;(function(){var container=document.body.querySelector('.article-content:not(.version-2)');if(!container){return;}
var tags=['iframe','object','embed'];var prefix=':not(.dd-video-element-wrapper) > ';for(var i=0,l=tags.length;i<l;i++){var tag=tags[i];var selector=prefix+tag;var undecorated=container.querySelectorAll(selector);for(var j=0,k=undecorated.length;j<k;j++){var element=undecorated[j];var wrapper=document.createElement('div');wrapper.className='dd-video-element-wrapper';element.parentNode.replaceChild(wrapper,element);wrapper.appendChild(element);}}})();;(function(){var pixelUrl;try{pixelUrl=dot.application.data.comscore.pixel_url;}catch(e){}
if(pixelUrl){dot.events.EventTargetProvider.getEventTarget().addEventListener(dot.newsreader.content.InfiniteScroll.EventType.RENDERED,function(){var pixel=document.createElement('img');pixel.src=pixelUrl+"&cachebustin="+Date.now();document.head.appendChild(pixel);});}})();;(function(){if(!document.getElementById('dd-nav-global-top')){return;}
var navStateManager=new dot.newsreader.ui.NavigationStateManager();navStateManager.initializeStateManagement();})();;(function(){document.body.addEventListener('click',function(e){var element=e.target;if(element.tagName.toLowerCase()=='a'){var parent=element.parentNode;while(parent&&parent!=document.body){if(parent.classList.contains('dd-tile')){e.stopPropagation();break;}
parent=parent.parentNode;}}
if(element.classList.contains('dd-tile')){var anchor=element.querySelector('a');if(anchor!=null){window.location.href=anchor.href;}}});})();;(function(){if('FB'in window){var content=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(!content){return;}
dot.newsreader.ui.SocialTracker.getInstance().handleFacebookShareButtons(content);}})();;(function(){var buttons=document.getElementsByClassName('dd-button-share-permalink');Array.from(buttons).forEach(function(button){new dot.newsreader.ui.URLCopyButton(button);});})();;(function(){var tabContainer=document.getElementById("dd-about-tab-bar");var contentContainer=document.getElementById("dd-about-tab-contents");if(!tabContainer||!contentContainer){return;}
new dot.ui.TabBar(tabContainer,contentContainer);})();;(function(){var articleBodies=document.querySelectorAll('.dd-content-body-wrapper');if(!articleBodies||articleBodies.length==0){return;}
var articleBody=articleBodies[0];if(articleBody.hasAttribute('data-tracking-exempt')){return;}
if(articleBody.childElementCount==1){articleBody=articleBody.firstElementChild;}
dot.newsreader.content.ArticleTracker.getInstance().init(articleBody);})();;(function(){var articleBody=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(!articleBody){return;}
dot.newsreader.ui.SocialTracker.getInstance().trackOutboundLinks(articleBody);})();;(function(){if(document.getElementById('dd-beggar-modal')){var experimentsManager=new dot.experiments.ExperimentManager('h8BNcyfCTV6EF1VoivmW5A');experimentsManager.determineVariation(function(variation){if(variation){new dot.newsreader.ui.BeggarModal();if(variation==1){var beggarCallToActionElement=document.getElementById('dd-beggar-modal-call-to-action-text');if(beggarCallToActionElement){beggarCallToActionElement.innerText='Read the stories the mainstream media will report tomorrow.';}}}});}})();;(function(){var count=1;dot.events.EventTargetProvider.getEventTarget().addEventListener(dot.newsreader.content.InfiniteScroll.EventType.RENDERED,function(){ga('send','event','pages_rendered','render','count',count++);});})();;(function(){var content=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(!content){return;}
dot.newsreader.ui.LinkManager.getInstance().apply(content);})();;(function(){var content=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(!content){return;}
var appender=new dot.newsreader.ui.ArticleAppender(content);appender.append();})();;(function(){var content=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(!content){return;}
if(content&&content.childElementCount==1){var adManager=new dot.newsreader.ads.ArticleAdManager();adManager.encloseInlineAndTextNodeChildrenInParagraphs(content.firstElementChild);}
new dot.newsreader.ui.TierOrganizer(content).reorganize();})();;(function(){var content=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(!content){return;}
var elements=document.getElementsByClassName('dd-share-bar-wrapper');if(!elements){return;}
for(var i=0;i<elements.length;i++){new dot.newsreader.ui.ShareBar(elements[i]);}})();;(function(){var nav=document.getElementById('dd-nav-global-top');if(!nav){return;}
var takeover=document.getElementById("dd-search-takeover-overlay");var input=document.getElementById("dd-search-input");var show=function(e){e.preventDefault();takeover.classList.add('dd-open');input.focus();};var hide=function(e){e.preventDefault();takeover.classList.remove('dd-open');};var buttons=document.getElementsByClassName('dd-button-open-search-page');for(var i=0,l=buttons.length;i<l;i++){var button=buttons[i];button.addEventListener('click',show);}
var closeButtons=document.getElementsByClassName('dd-button-close-search-takeover');for(var i=0,l=closeButtons.length;i<l;i++){var button=closeButtons[i];button.addEventListener('click',hide);}
var searchAutocomplete=new dot.widgets.SearchAutoComplete(input);})();;(function(){if(document.getElementById('dd-nav-global-top')){var localDate=new dot.widgets.GetLocaleDate();dot.events.EventTargetProvider.getEventTarget().addEventListener(dot.newsreader.content.InfiniteScroll.EventType.RENDERED,function(){localDate.init();});localDate.init();}})();;(function(){var content=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(!content){return;}
var popups=document.querySelectorAll('.dd-article-link-popup');if(!popups){return;}
var matchingURLs=[];for(var i=0,x=popups.length;i<x;i++){matchingURLs[i]=popups[i].getAttribute("rel");}
var helper=dot.newsreader.ui.PopupHelper.getInstance();var hover=function(e){for(var i=popups.length-1;i>=0;i--){var popup=popups[i];if(popup==this.popupNode){if(!popup.classList.contains('dd-open')){popup.classList.add('dd-open');helper.transitionInPopup(this,popup);popup.addEventListener('mouseleave',leave);}}else{popup.classList.remove('dd-open');}}};var leave=function(e){for(var i=popups.length-1;i>=0;i--){var popup=popups[i];if(popup.classList.contains('dd-open')){popup.classList.remove('dd-open');}}};var links=content.getElementsByTagName('a');for(var i=links.length-1;i>=0;i--){var link=links[i];var href=link.getAttribute('href');for(var j=0,y=matchingURLs.length;j<y;j++){var match=matchingURLs[j];if(href.indexOf(match)>-1){link.popupNode=popups[j];link.addEventListener('mouseenter',hover);break;}}}})();;(function(){var form=document.getElementById('dd-search-results-form');if(!form){return;}
var dropdowns=form.querySelectorAll('select');for(var i=0,x=dropdowns.length;i<x;i++){dropdowns[i].addEventListener('change',function(e){form.submit();});}})();;(function(){var content404=document.querySelector('.dd-404-message');if(!content404){return;}
var funnyMessageArray=["Sorry, we couldn't find the page you were looking for.","Have you tried turning it off and back on again?","Well, this is awkward.","Damn, Daniel! You broke it.","I'm sorry, Dave. I'm afraid I can't do that.","This is not the page you are looking for.","It's just turtles all the way down.","Are you lost?","Looks like somebody's got a case of the Mondays.","If at first you don't succeed, cry, cry again.","The Internet is a series of tubes. But this one is empty.","Thanks, Obama.","Well, that didn't go as planned.","It's not you; it's us.","Just keep refreshing. That'll fix it.","Cost you a click.","Yeah... We screwed up.","You've got 404 problems, but this one's on us.","And just like that-*poof*-it disappeared.","Ya dun goofed.","We're gonna blame this on monkeys.","Yeah, no.","Nope.","Welp.","Fresh outta content.","Edward Snowden stole this article.","Please don't tell our boss there's nothing here.","Definitely panic.","Keep calm and destroy your computer.","We did this on purpose.","Welcome to 404ville. Population: You.","Probably not a cyberattack.","Couldn't be bothered.","This is all your fault.","So long, and thanks for all the clicks.","Phew, now you don't have to read anything."];var messageLinkObject={'/tags/dank-memes/':"Memes are dank. This is not.",'/tags/bros/':"Bro, do you even click?",'/tags/missing/':"Something's missing"};var typewriter404=new dot.widgets.Typewriter404(content404);typewriter404.print404Message('404',function(){typewriter404.print404Message(funnyMessageArray,function(){typewriter404.print404Message(messageLinkObject);});});})();;(function(){var stackForm=document.getElementById('dd-stackcommerce-email-subscribe-form');if(!stackForm){return;}else{var stackNewsletter=new dot.newsreader.ads.StackcommerceEmail();};})();;(function(){var content=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(!content){return;}
var og_tag=document.querySelector("meta[property='article:section']");var section=og_tag.getAttribute('content');if(['Debug','Esports','Parsec'].includes(section)){return;}
var experimentsManager=new dot.experiments.ExperimentManager('6mpEx0oHReOJYpieVAqsKQ');experimentsManager.determineVariation(function(variation){if(variation==1){var recirc=document.querySelector('.dd-article-recirculation');if(recirc){recirc.remove();}}});})();;(function(){var content=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(!content){return;}
var og_tag=document.querySelector("meta[property='article:section']");var section=og_tag.getAttribute('content');if(!['Debug','Esports','Parsec'].includes(section)){return;}
var experimentsManager=new dot.experiments.ExperimentManager('mGB42RHVTiKURI9-sM94eg');experimentsManager.determineVariation(function(variation){if(variation==1){var script=document.createElement('script');script.src="//players.brightcove.net/4929511748001/SklMUedTU_default/index.min.js";document.head.appendChild(script);var video=document.querySelector('.dd-article-recirculation-card-video-container');video.style.display='block';var recircs=document.querySelectorAll('.dd-article-recirculation-card');if(recircs&&recircs.length>=2){recircs[0].style.display='none';}}});})();;(function(){var articleBody=document.querySelector('.dd-article-body .dd-content-body-wrapper');if(!articleBody){return;}
if(articleBody.childElementCount==1){articleBody=articleBody.firstElementChild;}
var insertNextArticle=function(){var container=document.getElementById("outermost_container");container.insertAdjacentHTML('beforeend',this.responseText);var contents=document.querySelectorAll('.dd-article-body .dd-content-body-wrapper');var content=contents[contents.length-1];var article=content.closest('.dd-article-container');var headline=article.querySelector('h1.dd-article-headline').innerHTML;ga('send',{hitType:'pageview',page:content.getAttribute('data-permalink'),title:headline});var appender=new dot.newsreader.ui.ArticleAppender(content);appender.append();var localDate=new dot.widgets.GetLocaleDate();localDate.init();new dot.newsreader.ui.TierOrganizer(content).reorganize();if(!content.hasAttribute('data-ad-exempt')){var adService=dot.newsreader.ads.AdService.getInstance();var adManager=dot.newsreader.ads.ArticleAdManager.getInstance();if(content&&content.childElementCount==1){adManager.insertAds(content.firstElementChild,adService.discover);}}
dot.newsreader.ui.LinkManager.getInstance().apply(content);dot.newsreader.content.ArticleTracker.getInstance().init(content);var tracker=dot.newsreader.ui.SocialTracker.getInstance();tracker.addTrackingHandlers(content);tracker.handleFacebookShareButtons(content);tracker.trackOutboundLinks(content);loader.setupLoader(content.firstElementChild,insertNextArticle);}
var loader=new dot.newsreader.content.ContinuousLoader();loader.setContentURLs(dot.application.data.popular_articles);loader.setupLoader(articleBody,insertNextArticle);loader.setupUpdater();})();